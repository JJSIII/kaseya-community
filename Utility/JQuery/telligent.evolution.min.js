(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.administrationToolbar={get:function(){var s;s=a(".admin-bar");if(s.length>0)s=s;else{s=a("form");if(s.length>1)s=a("body");s.prepend(a('<div class="admin-bar-header"></div><div class="admin-bar site"></div><div class="admin-bar-footer"></div>'));s=a(".admin-bar")}return s}}})(jQuery,window);
(function(a){var s=!a.browser.msie&&"oninput"in document.createElement("input")&&"oninput"in document.createElement("textarea");a.event.special.textinput={setup:function(){var m=a(this);if(s)m.bind("input",function(c){m.trigger("textinput",{which:c.which})});else{var j;m.bind({keydown:function(){j=m.val()},keyup:function(c){var e=m.val();e!==j&&m.trigger("textinput",{which:c.which});j=e}})}}}})(jQuery);
(function(a){var s=function(b,r){b=a(b);var q=b.data("__COMPOSER_CONTEXT");if(!q&&r){q=m(b,r);b.data("__COMPOSER_CONTEXT",q)}return q},m=function(b,r){var q=a.extend({},a.fn.evolutionComposer.defaults,r||{});q={input:b,settings:q,plugins:a.map(q.plugins,function(o){return typeof o=="string"?a.fn.evolutionComposer.plugins[o]:o}),ranges:[],activePlugin:false};q.pluginContext=j(q);q.input.evolutionHighlight();c(q);return q},j=function(b){return{settings:b.settings,input:b.input,data:function(r,q){return typeof q!==
"undefined"?b.input.data(r,q):b.input.data(r)},val:function(r){return typeof r!=="undefined"?b.input.val(r):b.input.val()},release:function(){b.activePlugin.onDeactivate&&b.activePlugin.onDeactivate.call(b.input,b.pluginContext);b.activePlugin=false},caretPosition:function(){return g(b.input)},currentWord:function(r){r=a.extend({allowedWhiteSpaceBeforeCaret:0,allowedWhiteSpaceAfterCaret:0},r||{});var q=r.caretPosition||g(b.input),o="",p=a(b.input).val(),t="",v=0,w=q,u=0;if(q<p.length&&!(p[q]==="\n"||
p[q]==="\t")){t=p.substring(q);v=l(t);if(v<0)v=t.indexOf("\n");if(v<0)v=t.indexOf("\t");if(v<0)v=t.length;for(u=0;u<r.allowedWhiteSpaceAfterCaret;u++)if(v>0){var x=p.substring(q+v+1);nextWhiteSpaceIndex=l(x);nextWhiteSpaceIndex=nextWhiteSpaceIndex===-1?x.length:nextWhiteSpaceIndex;if(nextWhiteSpaceIndex>0)v+=nextWhiteSpaceIndex+1;else break}if(v>0){w=0;o+=t.substring(0,v)}}if(q>0&&!(p[q-1]==="\n"||p[q-1]==="\t")){t=p.substring(0,q);v=n(t);for(u=0;u<r.allowedWhiteSpaceBeforeCaret;u++)if(v>0){q=n(p.substring(0,
v));if(q!==v)v=q;else break}if(v===t.length)v=t.lastIndexOf("\n");if(v===t.length)v=t.lastIndexOf("\t");if(v===t.length)v=t.length-1;if(v<t.length-1){w=v+1;o=t.substring(w)+o}}return{value:o,start:w,stop:w+o.length}},replace:function(r,q,o){var p=b.input.val();b.input.val(p.substring(0,r)+o+p.substring(q))},clearHighlights:function(r){var q=[];a.each(b.ranges,function(o,p){if(!r||p.className!==r)q.push(p)});b.ranges=q;b.input.evolutionHighlight({ranges:b.ranges})},addHighlight:function(r){b.ranges.push(r)},
renderHighlights:function(){b.input.evolutionHighlight({ranges:b.ranges})}}},c=function(b){b.input.bind({keypress:function(r){e(b,"onkeypress",r)},keydown:function(r){e(b,"onkeydown",r)},textinput:function(r){f(b,r);e(b,"oninput",r);h(b)}})},e=function(b,r,q){var o=true;if(b.activePlugin&&b.activePlugin[r])o=b.activePlugin[r].call(q.target,b.pluginContext,q);if(o){if(b[r])(o=b[r].call(q.target,q))||q.preventDefault()}else q.preventDefault()},f=function(b){b.activePlugin||a.each(b.plugins,function(r,
q){if(q.shouldActivate&&q.shouldActivate.call(b.input,b.pluginContext)===true){b.activePlugin=q;q.onActivate&&q.onActivate.call(b.input,b.pluginContext);return false}})},h=function(b){a.each(b.plugins,function(r,q){q.onTransform&&q.onTransform.call(b.input,b.pluginContext)})},l=function(b){var r=[];a.each([" ","\t","\n"],function(q,o){var p=b.indexOf(o);p>=0&&r.push(p)});r.sort();return r.length>0?r[0]:-1},n=function(b){var r=[];a.each([" ","\t","\n"],function(q,o){var p=b.lastIndexOf(o);p>=0&&r.push(p)});
r.sort();return r.length>0?r[r.length-1]:-1},g=function(b){b=b.get(0);if(b.selectionStart)return b.selectionStart;else if(document.selection){var r=document.selection.createRange();if(r===null)return 0;b=b.createTextRange();var q=b.duplicate();b.moveToBookmark(r.getBookmark());q.setEndPoint("EndToStart",b);return q.text.length}return 0},k=function(b){typeof a.fn.evolutionResize!=="undefined"&&b.input.evolutionResize().bind("evolutionResize",function(){b.input.evolutionHighlight("resize",b.input.width(),
b.input.height())})},d={init:function(b){return this.filter("textarea").each(function(){var r=a(this),q=s(r,b);k(q);q!==null&&a.each(q.plugins,function(o,p){p.init&&p.init.call(r,q.pluginContext)});setTimeout(function(){r.focus()},10)})},val:function(b){if(typeof b!=="undefined"){var r=s(this);if(r){r.input.val(b);h(r)}}else{r=s(this);var q="";if(r){q=r.input.val();a.each(r.plugins,function(o,p){if(p.val)q=p.val.call(r.input,q,r.pluginContext)})}return q}return this},onkeydown:function(b){var r=s(this);
if(r)r.onkeydown=b;return this},oninput:function(b){var r=s(this);if(r)r.oninput=b;return this},resize:function(b,r){var q=s(this);q&&q.input.evolutionHighlight("resize",b,r);return this}};a.fn.evolutionComposer=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on jQuery.evolutionComposer")};a.fn.evolutionComposer.defaults={plugins:[]};a.fn.evolutionComposer.plugins=
{}})(jQuery);
(function(a){var s=function(){var j=null,c={},e=function(b){var r=b.data("_tagged_tags");if(typeof r==="undefined"||r===null){r=[];b.data("_tagged_tags",r)}return r},f=function(b,r,q,o,p){var t=e(b);t[t.length]=r;if(q){var v=b.currentWord();b.replace(v.start,v.stop+1,r.decodedName+(o?" ":""))}r=v.start+(r.decodedName+(o?" ":"")).length;q=b.input.get(0);if(q.setSelectionRange)q.setSelectionRange(r,r);else if(q.createTextRange){r=q.createTextRange();r.collapse(true);r.moveEnd("character",pos);r.moveStart("character",
pos);r.select()}h(b);b.data("_hashtag_composer_active",false);m.hide();b.input.focus();p&&b.release()},h=function(b){var r=e(b).reverse(),q=b.val();b.clearHighlights(b.settings.highlightClass||n);var o={};a.each(r,function(p,t){if(t&&t.decodedName!==null&&t.decodedName.length>0){var v=q.indexOf(t.decodedName);if(v<0||o[v])r.splice(p,1);else for(;v>=0;){b.addHighlight({start:v,stop:t.decodedName.length+v,className:b.settings.highlightClass||n});o[v]=true;v=q.indexOf(t.decodedName,v+1)}}});b.renderHighlights()},
l=function(b){return b.length>2&&b.indexOf("#")===0&&!j.test(b.substr(1))&&isNaN(parseInt(b[1],10))},n="composer-hashtag-highlight",g=function(){},k=null;j=RegExp("["+"-_~`!@#$%^&*()=+{[}]\\|;:'\",<.>/? ".replace("]","\\]")+"]","i");for(var d=0;d<33;d++)c["-_~`!@#$%^&*()=+{[}]\\|;:'\",<.>/? ".charCodeAt(d)]=true;return{init:function(b){g=b.settings.onTagList||a.fn.evolutionComposer.plugins.hashtags.defaults.onTagList;b.input.bind(m.selectedEventName,function(){f(b,m.selection(),true,true,true)});
b.input.bind("blur",function(){setTimeout(function(){b.release()},500)})},onTransform:function(b){h(b)},shouldActivate:function(b){return l(b.currentWord().value)},onActivate:function(b){b.data("_hashtag_composer_active",true);a(document).bind("click.ui-composer-hashtags",function(){b.release();a(document).unbind(".ui-composer-hashtags")})},onDeactivate:function(b){var r=b.currentWord();l(r.value)&&f(b,{decodedName:r.value,name:r.value,token:"[tag:"+r.value.substr(1)+"]"},true,false,false);b.data("_hashtag_composer_active",
false);m.hide();b.input.focus()},val:function(b,r){var q=e(r);a.each(q,function(o,p){b=b.replace(RegExp(a.telligent.evolution.regex.encode(p.decodedName),"g"),p.token)});return b},onkeydown:function(b,r){if(r.which===27||r.which===32)b.release();else if(r.which===13||r.which===9){var q=m.selection();if(q){f(b,q,true,true,true);return false}else b.release()}else if(r.which===38){m.moveHighlightUp();return false}else if(r.which===40){m.moveHighlightDown();return false}return true},onkeypress:function(b,
r){typeof c[r.which]!=="undefined"&&b.release();return true},oninput:function(b){if(!l(b.currentWord().value)){b.release();return true}clearTimeout(k);m.loading(b.input);k=setTimeout(function(){var r=b.currentWord().value;if(l(r))r.length>=2&&g(r.substr(1),function(q){if(b.data("_hashtag_composer_active")){if(q)q=a.map(q,function(p){return{name:p.name,token:p.token,decodedName:a.telligent.evolution.html.decode(p.name)}});var o=b.currentWord().value;o==r&&l(o)&&q!==null&&q.length>0?m.show(b.input,
q,r):m.hide()}});else b.release()},500);return true}}}(),m=function(){var j=null,c=null,e=null,f=function(n){c=n;if(j===null){j=a('<ul class="composer-hashtag-selector"></ul>').hide().appendTo(a("body"));e=a('<li class="loading">...</li>');var g=0,k=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){g+=1;if(g===3)g=0;e.get(0).innerHTML=k[g]},175);j.delegate("li","click",function(){if(c!==null){j.find("li.highlight").removeClass("highlight");
a(this).addClass("highlight");c.trigger(l.selectedEventName)}})}},h=function(){if(c!==null){var n=c.offset(),g=a(c);j.css({width:g.outerWidth()-2,top:n.top+g.outerHeight()-1,left:n.left})}},l={selectedEventName:"HASHTAG_SELECTED",show:function(n,g,k){f(n);h();j.hide().empty();var d=RegExp(a.telligent.evolution.regex.encode(a.telligent.evolution.html.encode(k)),"i");a.each(g,function(b,r){var q=r.name.match(d);q=q!==null?a("<li>"+r.name.replace(d,"<strong>"+q[0]+"</strong>")+"</li>"):a("<li>"+r.name+
"</li>");q.data("tagData",r);j.append(q)});j.show()},hide:function(){j!==null&&j.hide().empty()},loading:function(n){f(n);h();j.hide().empty().append(e).show()},moveHighlightUp:function(){var n=j.find("li");if(n.length!==0){var g=n.length;a.each(n,function(k,d){if(a(d).hasClass("highlight")){g=k;a(d).removeClass("highlight")}});if(g-1<0)g=n.length;a(n.get(g-1)).addClass("highlight")}},moveHighlightDown:function(){var n=j.find("li");if(n.length!==0){var g=-1;a.each(n,function(k,d){if(a(d).hasClass("highlight")){g=
k;a(d).removeClass("highlight")}});if(g+1>=n.length)g=-1;a(n.get(g+1)).addClass("highlight")}},selection:function(){var n=j.find("li");if(n.length===0)return null;var g=n.filter("li.highlight");return g!==null&&g.length>0?g.data("tagData"):a(n.get(0)).data("tagData")}};return l}();a.fn.evolutionComposer.plugins.hashtags=s;a.fn.evolutionComposer.plugins.hashtags.defaults={onTagList:function(j,c){a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/hashtags.json?IncludeFields=Token,PreviewHtml",
data:{QueryText:j,PageSize:5},cache:false,dataType:"json",success:function(e){if(e.HashTags&&e.HashTags.length>0){e=a.map(e.HashTags,function(f){return{name:f.PreviewHtml,token:f.Token}});c(e)}else c(null)}})}}})(jQuery,window);
(function(a){var s=function(){var j={};allowedSpacesKey="_allowed_spaces";isActiveKey="_hashtag_composer_active";caretPosition=0;getMentions=function(c){var e=c.data("_mentioned_mentionables");if(typeof e==="undefined"||e===null){e=[];c.data("_mentioned_mentionables",e)}return e};setCursorPosition=function(c,e){var f=c.input.get(0);if(f.setSelectionRange)f.setSelectionRange(e,e);else if(f.createTextRange){f=f.createTextRange();f.collapse(true);f.moveEnd("character",pos);f.moveStart("character",pos);
f.select()}};mentionMentionable=function(c,e){var f=getMentions(c);f[f.length]=e;c.release();f=effectiveCurrentWord(c);c.replace(f.start,f.stop+1,e.decodedName+" ");updateHighlights(c);allowedSpaces(c,0);setCursorPosition(c,f.start+(e.decodedName+" ").length)};updateHighlights=function(c){var e=getMentions(c),f=c.val();c.clearHighlights(c.settings.highlightClass||mentionHighlightClass);a.each(e,function(h,l){if(l&&l.decodedName!==null&&l.decodedName.length>0){var n=f.indexOf(l.decodedName);if(n<0)e.splice(h,
1);else for(;n>=0;){c.addHighlight({start:n,stop:l.decodedName.length+n,className:c.settings.highlightClass||mentionHighlightClass});n=f.indexOf(l.decodedName,n+1)}}});c.renderHighlights()};mentionHighlightClass="composer-mentionable-mention-highlight";getMentionables=function(){};getMentionablesTimeout=null;allowedSpaces=function(c,e){if(typeof e!=="undefined"){c.data("_allowed_spaces",e);return e}else return c.data("_allowed_spaces")||0};effectiveCurrentWord=function(c){var e=c.val().substring(0,
caretPosition),f=null;a.each(j,function(l,n){if(n!==null&&n.length>0&&e.match("@"+a.telligent.evolution.regex.encode(l)+"$")){f="@"+l;return false}});if(f!==null){var h=e.length-f.length;allowedSpaces(c,f.split(" ").length-1);return{value:f,start:h,stop:h+f.length}}else return c.currentWord({caretPosition:caretPosition,allowedWhiteSpaceBeforeCaret:allowedSpaces(c)})};return{init:function(c){getMentionables=c.settings.onMentionableList||a.fn.evolutionComposer.plugins.mentions.defaults.onMentionableList;
c.input.bind(m.selectedEventName,function(){mentionMentionable(c,m.selection())});c.input.bind({blur:function(){setTimeout(function(){c.release()},500)},keydown:function(){caretPosition=c.caretPosition()+1}})},onTransform:function(c){updateHighlights(c)},shouldActivate:function(c){return effectiveCurrentWord(c).value.indexOf("@")===0},onActivate:function(c){c.data(isActiveKey,true);a(document).bind("click.mentions",function(){c.release();a(document).unbind(".mentions")})},onDeactivate:function(c){c.data(isActiveKey,
false);m.hide();c.input.focus();allowedSpaces(c,0)},val:function(c,e){var f=getMentions(e);a.each(f,function(h,l){c=c.replace(l.decodedName,l.token)});return c},onkeydown:function(c,e){if(e.which===32)allowedSpaces(c,allowedSpaces(c)+1);else if(e.which===27){c.release();return false}else if(e.which===13||e.which===9){var f=m.selection();f?mentionMentionable(c,f):c.release();return false}else if(e.which===38){m.moveHighlightUp();return false}else if(e.which===40){m.moveHighlightDown();return false}return true},
onkeypress:function(){return true},oninput:function(c){clearTimeout(getMentionablesTimeout);m.loading(c.input);getMentionablesTimeout=setTimeout(function(){var e=effectiveCurrentWord(c).value.substring(1);if(e.length>1){var f=function(h){h!==null&&h.length>0?m.show(c.input,h,e):c.release()};if(typeof j[e]!=="undefined")c.data(isActiveKey)&&f(j[e]);else getMentionables(e,function(h){if(c.data(isActiveKey)){if(h)h=a.map(h,function(l){return{name:l.name,token:l.token,decodedName:a.telligent.evolution.html.decode(l.name)}});
j[e]=h;effectiveCurrentWord(c).value.substring(1)==e&&f(h)}})}else c.release()},500);return true}}}(),m=function(){var j=null,c=null,e=null,f=function(n){c=n;if(j===null){j=a('<ul class="composer-mentionable-selector"></ul>').hide().appendTo(a("body"));e=a('<li class="loading">...</li>');var g=0,k=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){g+=1;if(g===3)g=0;e.get(0).innerHTML=k[g]},175);j.delegate("li",
"click",function(){if(c!==null){j.find("li.highlight").removeClass("highlight");a(this).addClass("highlight");c.trigger(l.selectedEventName)}})}},h=function(){if(c!==null){var n=c.offset(),g=a(c);j.css({width:g.outerWidth()-2,top:n.top+g.outerHeight()-1,left:n.left})}},l={selectedEventName:"MENTIONABLE_SELECTED",show:function(n,g,k){f(n);h();j.hide().empty();var d=RegExp(a.telligent.evolution.regex.encode(a.telligent.evolution.html.encode(k)),"i");a.each(g,function(b,r){var q=r.name.match(d);q=q!==
null?a("<li>"+r.name.replace(d,"<strong>"+q[0]+"</strong>")+"</li>"):a("<li>"+r.name+"</li>");q.data("mentionableData",r);j.append(q)});j.show()},hide:function(){j!==null&&j.hide().empty()},loading:function(n){f(n);h();j.hide().empty().append(e).show()},moveHighlightUp:function(){var n=j.find("li");if(n.length!==0){var g=n.length;a.each(n,function(k,d){if(a(d).hasClass("highlight")){g=k;a(d).removeClass("highlight")}});if(g-1<0)g=n.length;a(n.get(g-1)).addClass("highlight")}},moveHighlightDown:function(){var n=
j.find("li");if(n.length!==0){var g=-1;a.each(n,function(k,d){if(a(d).hasClass("highlight")){g=k;a(d).removeClass("highlight")}});if(g+1>=n.length)g=-1;a(n.get(g+1)).addClass("highlight")}},selection:function(){var n=j.find("li");if(n.length===0)return null;var g=n.filter("li.highlight");return g!==null&&g.length>0?g.data("mentionableData"):a(n.get(0)).data("mentionableData")}};return l}();a.fn.evolutionComposer.plugins.mentions=s;a.fn.evolutionComposer.plugins.mentions.defaults={onMentionableList:function(j,
c){a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/mentionables.json?IncludeFields=Token,PreviewHtml",data:{QueryText:j,PageSize:20},cache:false,dataType:"json",success:function(e){if(e.Mentionables&&e.Mentionables.length>0){e=a.map(e.Mentionables,function(f){return{name:f.PreviewHtml,token:f.Token}});c(e)}else c(null)}})}}})(jQuery,window);
(function(a){var s=/(\b(http):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,m=function(){var j={init:function(c){c.highlighClassName=c.highlighClassName||j.defaults.highlighClassName},onTransform:function(c){var e;e=(c.val()||"").match(s);e=e!==null&&e.length>0?e[0]:null;if(e!==null){var f;f=c.data("_composer_urlpreview_data");if(f===null||typeof f==="undefined"){f={};c.data("_composer_urlpreview_data",f)}f=f;var h=c.val().indexOf(e);if(h>=0&&typeof f.lastRange==="undefined"||f.lastRange.start!==
h||f.lastRange.stop!==h+e.length){f.lastRange={start:h,stop:h+e.length};c.clearHighlights(c.highlighClassName);c.addHighlight({start:h,stop:h+e.length,className:c.highlighClassName});c.renderHighlights()}}else c.clearHighlights(c.highlighClassName)},shouldActivate:function(){return false},val:function(c){return c},onkeydown:function(){return true},oninput:function(){return true}};j.defaults={highlighClassName:"composer-url-highlight",loadingText:"..."};return j}();a.fn.evolutionComposer.plugins.urlhighlight=
m})(jQuery,window);
(function(a,s){if(typeof a.telligent==="undefined")a.telligent={};if(typeof a.telligent.evolution==="undefined")a.telligent.evolution={};var m={baseUrl:"",authorizationCookieName:"AuthorizationCookie",defaultErrorMessage:"An error occured while communicating with the server.",defaultMultiErrorMessagePrefix:"The following errors occured while communicating with the server:\t "},j=["RecordNotFound","BadRequest","Conflict","Unauthorized","Unknown"],c=function(h,l){h.url&&h.data&&typeof h.data!=="string"&&
a.each(h.data,function(d,b){var r=RegExp("{"+d+"}","gim");if(h.url.match(r)){h.url=h.url.replace(r,s.encodeURIComponent(b));delete h.data[d]}});var n=h.beforeSend,g=h.error,k=a.extend({},m,h);a.extend(h,{type:l==="GET"?l:"POST",beforeSend:function(d){typeof n!=="undefined"&&n(d);f(d);if(l==="PUT"||l==="DELETE")d.setRequestHeader("Rest-Method",l)},error:function(d,b,r){if(!(d.readyState===0||d.status===0)){b=k.defaultErrorMessage;var q=/(?:<|>)/g,o=null;try{var p=a.parseJSON(d.responseText);if(p&&
p.Errors&&a.isArray(p.Errors)&&p.Errors.length>0){var t=[];a.each(p.Errors,function(u,x){var y=x.split(":",2);if(y.length===1)t.push(y[0].replace(q,""));else a.inArray(y[0],j)>=0&&t.push(y[1].replace(q,""))});if(t.length===1||t.length>1&&typeof a.telligent.evolution.notifications==="undefined")b=t[0];else if(t.length>1){o=t[0];b=k.defaultMultiErrorMessagePrefix;b+="<ul>";a.each(t,function(u,x){b+="<li>"+x+"</li>"});b+="</ul>"}}if(b===null||a.trim(b)==="")b=k.defaultErrorMessage}catch(v){}if(typeof g!==
"undefined")g(d,o||b,r);else try{a.telligent.evolution.notifications.show(b,{type:"error"})}catch(w){alert(o||b)}}}});return a.ajax(h)},e=function(h,l,n){for(h+="";h.length<l;)h=n+h;return h},f=function(h){var l=function(n){n=n+"=";for(var g=document.cookie.split(";"),k=0;k<g.length;k++){for(var d=g[k];d.charAt(0)==" ";)d=d.substring(1,d.length);if(d.indexOf(n)==0)return d.substring(n.length,d.length)}return null}(m.authorizationCookieName);if(l!=null){h.setRequestHeader("Authorization-Code",l);h.setRequestHeader("Rest-Authorization-Code",
l)}};a.extend(a.telligent.evolution,{get:function(h){return c(h,"GET")},post:function(h){return c(h,"POST")},put:function(h){return c(h,"PUT")},del:function(h){return c(h,"DELETE")},formatDate:function(h){var l;a:{try{l=[e(h.getFullYear(),4,"0"),"-",e(h.getMonth()+1,2,"0"),"-",e(h.getDate(),2,"0"),"T",e(h.getHours(),2,"0"),":",e(h.getMinutes(),2,"0"),":",e(h.getSeconds(),2,"0")].join("");break a}catch(n){}l=""}return l},parseDate:function(h){var l;l=/\/Date\((\d+)(?:-(\d+))?\)\//;var n=/(\d{4,4})\-(\d{2,2})\-(\d{2,2})(?:T(\d{2,2}):(\d{2,2}):(?:(\d{2,2})(?:\.(\d{0,3}))?))?/,
g=new Date;if(h===null||h==="")l=g;else if((l=l.exec(h))!=null)l=new Date(parseInt(l[1],10));else if((l=n.exec(h))!=null){h=[g.getFullYear(),g.getMonth()+1,g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds()];for(n=1;n<l.length&&n<8;n++)if(l[n]!=""&&l[n]!=void 0)h[n-1]=parseInt(l[n],10);l=new Date(h[0],h[1]-1,h[2],h[3],h[4],h[5],h[6])}else throw"Invalid date format";return l},writeAuthorizationHeader:function(h){return f(h)}});a.telligent.evolution.site={configure:function(h){m=
a.extend({},m,h);a.fn.glowDateTimeSelector&&a.extend(a.fn.glowDateTimeSelector.defaults,{monthNames:m.monthNames,dayNames:m.dayNames,calendarButtonImageUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/DateTimeSelectorCalendar.gif"});if(a.glowModal){a.extend(a.glowModal.defaults,{loadingHtmlUrl:a.telligent.evolution.site.getBaseUrl()+"utility/loading.htm",windowCssClasses:["modal"],windowTitleCssClasses:["modal-title","modal-title-2","modal-title-3","modal-title-4"],windowCloseCssClasses:["modal-close"],
windowContentCssClasses:["modal-content","modal-content-2"],windowMaskCssClasses:["modal-mask"],windowFooterCssClasses:["modal-footer","modal-footer-2","modal-footer-3"],windowResizeCssClasses:["modal-resize"],zIndex:200001});s.Telligent_Modal={GetWindowOpener:function(l,n){return a.glowModal.opener(l,n)},IsShown:function(l){return a.glowModal.visible(l)},Resize:function(l,n,g,k){a.glowModal.resize(l,n,g,k)},MoveTo:function(l,n,g){a.glowModal.moveTo(l,n,g)},Open:function(l,n,g,k,d,b,r,q,o){a.glowModal(l,
{width:n,height:g,onClose:k,x:d,y:b,ignoreCloseAndAnimation:r,isManuallyresized:q,openerWindow:o})},Close:function(l,n){a.glowModal.close(l,n)},Refresh:function(l){a.glowModal.refresh(l)}}}a.fn.glowDropDownList&&a.extend(a.fn.glowDropDownList.defaults,{buttonImageUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/DropDownListButton.gif"});a.fn.glowColorSelector&&a.extend(a.fn.glowColorSelector.defaults,{blendImageUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/ColorSelectorSv.png",
hueBlendImageUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/ColorSelectorHue.png"});if(a.fn.glowMultiUpload)a.extend(a.fn.glowMultiUpload.defaults,{swfUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.flash.swf",silverlightUrl:m.silverlightFileUploadEnabled?a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.silverlight.xap":"",runtimes:m.silverlightFileUploadEnabled?"html5,silverlight,flash":"html5,flash"});if(a.fn.glowUpload)a.extend(a.fn.glowUpload.defaults,
{swfUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.flash.swf",silverlightUrl:m.silverlightFileUploadEnabled?a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.silverlight.xap":"",runtimes:m.silverlightFileUploadEnabled?"html5,silverlight,flash":"html5,flash"})},getBaseUrl:function(){return m.baseUrl}}})(jQuery,window);if(typeof TelligentUtility=="undefined")var TelligentUtility={};TelligentUtility.WriteAuthorizationHeader=function(a){$.telligent.evolution.writeAuthorizationHeader(a)};
(function(a,s,m){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};var j={groups:{}},c=function(l,n,g){if(l.isSaving)if(n+1<l.widgets.length){var k=l.widgets[n+1];if(k.save){k=k.save(function(){c(l,n+1,g)},function(){e(l,n+1,g)});if(k===false)e(l,n+1,g);else k===true&&c(l,n+1,g)}else c(l,n+1,g)}else if(g.success){l.isSaving=false;g.success()}},e=function(l,n,g){if(l.isSaving){l.isSaving=false;g.error&&g.error()}},f=function(l,n,g){if(l.isValidating){l.widgets[n].valid=
true;var k=0;a.each(l.widgets,function(d,b){b.valid!==true&&k++});if(k==0){l.isValidating=false;g.success&&g.success()}}},h=function(l,n,g){if(l.isValidating){l.widgets[n].valid=false;l.isValidating=false;g.error&&g.error()}};a.telligent.evolution.editableGroup={register:function(l,n){var g=j.groups[l];if(!g){g={widgets:[],isSaving:false,isValidating:false};j.groups[l]=g}g.widgets[g.widgets.length]=a.extend({},n||{},{valid:false,saved:false})},save:function(l,n){a.telligent.evolution.editableGroup.validate(l,
{success:function(){var g=j.groups[l];if(g&&g.widgets.length>0){g.isSaving=true;c(g,-1,n)}else n&&n.success&&n.success()},error:function(){n.error&&n.error()}})},validate:function(l,n){var g=j.groups[l];if(g&&g.widgets.length>0){a.each(g.widgets,function(k,d){d.valid=m});g.isValidating=true;a.each(g.widgets,function(k,d){if(d.validate){var b=d.validate(function(){f(g,k,n)},function(){h(g,k,n)});if(b===false)h(g,k,n);else b===true&&f(g,k,n)}else f(g,k,n)})}else n&&n.success&&n.success()}}})(jQuery,
window);
(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};var s=function(m,j){j<0||(j>0&&m.subscriptionId!=""&&(m.context==""||m.contextId==="undefined")?_showMessage(m,m.errorMessage):a.telligent.evolution.post({url:m.emailDigestUrl,data:{subscriptionId:m.subscriptionId,frequency:j,context:m.context,contextId:m.contextId},success:function(c){c=eval("("+c+")");var e=null;if(c.action=="create"){m.subscriptionId=c.subscriptionId;m.frequency=j;if(j==1)e=m.dailyMessage;else if(j==
7)e=m.weeklyMessage}else if(c.action=="update"){m.frequency=j;if(j==1)e=m.dailyMessage;else if(j==7)e=m.weeklyMessage}else if(c.action=="delete"){m.subscriptionId="";m.frequency=0;if(m.context=="group")e=m.unsubscribeGroupMessage}if(c.warnings&&c.warnings.length>0)_showMessage(m,c.warnings[0],"warning");else e&&_showMessage(m,e,"success");c={subscriptionId:m.subscriptionId,frequency:m.frequency,context:m.context,contextId:m.contextId,action:c.action};a(document).trigger("emailDigestSubscriptionChange",
[c])},error:function(){_showMessage(m,m.errorMessage,"error")}}))};_showMessage=function(m,j,c){a.telligent.evolution.notifications.show(j,{type:c,duration:5E3})};a.telligent.evolution.emailDigest={register:function(m){a("#"+m.selectPopupId).glowPopUpPanel({cssClass:"Panel",position:"updown",zIndex:100,hideOnDocumentClick:true});a("#"+m.rollupWrapperId).click(function(){var j=a(this),c="",e="",f="";if(m.frequency==1)c="email-digest-selected";else if(m.frequency==7)e="email-digest-selected";else f=
"email-digest-selected";var h=j.outerWidth(),l=j.outerHeight();j=j.offset();c="<div class='email-digest-selectWrapper' style=\"width: "+(h-2)+'px;"><div frequency="1" class="email-digest-selectable '+m.selectableTag+" "+c+'"><span>'+m.popupDaily+'</span></div><div frequency="7" class="email-digest-selectable '+m.selectableTag+" "+e+'"><span>'+m.popupWeekly+'</span></div><div frequency="0" class="email-digest-selectable '+m.selectableTag+" "+f+'"><span>'+m.popupUnsubscribe+"</span></div></div>";a("#"+
m.selectPopupId).glowPopUpPanel("hide").glowPopUpPanel("html",c).glowPopUpPanel("show",j.left+4,j.top+5,h,l-10,false)});a("."+m.selectableTag).live("click",function(){var j=a(this);if(!j.hasClass("email-digest-selected")){j=j.attr("frequency");s(m,j)}});a(document).bind("emailDigestSubscriptionChange",function(j,c){if(!(c.context!=m.context||c.contextId!=m.contextId)){var e="";if(c.action=="create"||c.action=="update"){if(c.frequency=="1")e=m.rollupDaily;else if(c.frequency=="7")e=m.rollupWeekly;
m.subscriptionId=c.subscriptionId}else{e=m.rollupUnsubscribed;m.subscriptionId=""}m.frequency=c.frequency;a("#"+m.rollupTextId).html(e)}})}}})(jQuery);
(function(a,s){var m="onhashchange"in s&&(document.documentMode===undefined||document.documentMode>7),j=s.location.href,c=a(s),e;if(!m)a.event.special.hashchange={setup:function(){e||(e=setInterval(function(){if(s.location.href!==j){j=s.location.href;c.trigger("hashchange")}},a.hashChangeSettings.interval))}};a.hashChangeSettings={interval:10}})(jQuery,window);
(function(a){var s=function(h,l){var n=h.data("_HIGHLIGHTER_CONTEXT");if(typeof n==="undefined"||n===null){n={selection:h.filter("textarea"),settings:a.extend({},a.fn.evolutionHighlight.defaults,l||{})};m(n);n=n;h.data("_HIGHLIGHTER_CONTEXT",n)}return n},m=function(h){h.wrapper=a("<div></div>");h.mirror=a("<div></div>");var l={position:"relative",width:h.selection.outerWidth(),height:h.selection.outerHeight()};a.each(["margin-left","margin-right","margin-top","margin-bottom"],function(k,d){l[d]=h.selection.css(d);
h.selection.css(d,0)});var n={position:"absolute",top:"0px",left:"0px",zIndex:"0",borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderRightColor:"transparent",backgroundColor:h.selection.css("backgroundColor"),color:"transparent",width:h.selection.width(),height:h.selection.height(),overflow:"hidden",whiteSpace:"normal"};a.each(h.settings.styles,function(k,d){n[d]=h.selection.css(d)});var g={position:"absolute",top:"0px",left:"0px",zIndex:"1",backgroundColor:"transparent",
width:h.selection.width(),height:h.selection.height()};h.wrapper.css(l).addClass("highlighter");h.mirror.css(n);h.selection.css(g);h.mirror.css("color",h.mirror.css("background-color"));h.selection.before(h.wrapper);h.wrapper.append(h.selection);h.wrapper.append(h.mirror)},j=/\s\s/gi,c=/\n/gi,e=function(h){var l={};a.each(h.settings.ranges,function(d,b){l[b.start]=l[b.start]||[];l[b.start].push(b);l[b.stop]=l[b.stop]||[];l[b.stop].push(b)});var n=h.selection.val();newValue=[];for(var g=spanDepth=
0;g<n.length;g++){typeof l[g]!=="undefined"&&a.each(l[g],function(d,b){if(b.start===g){newValue[newValue.length]='<span class="'+b.className+'" style="white-space:normal;">';spanDepth++}else{newValue[newValue.length]="</span>";spanDepth--}});newValue[newValue.length]=n.charAt(g)}if(spanDepth>0)newValue[newValue.length]="</span>";n=newValue.join("").replace(c,"<br />").replace(j,"&nbsp; ");var k=document.createElement("span");k.innerHTML=n;h.mirror.empty().get(0).appendChild(k)},f={init:function(h){var l=
s(this,h);l.settings=a.extend({},a.fn.evolutionHighlight.defaults,h||{});e(l);return this},clear:function(){var h=s(this,null);if(h!==null){h.mirror.html("");return this}},resize:function(h,l){var n=s(this,null);if(n!==null){var g={width:h,height:l};n.mirror.css(g);n.selection.css(g);n.wrapper.css({width:n.selection.outerWidth(),height:n.selection.outerHeight()});return this}},css:function(h){var l=s(this,null);if(l!==null){l.wrapper.css(h);return this}}};a.fn.evolutionHighlight=function(h){if(f[h])return f[h].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof h==="object"||!h)return f.init.apply(this,arguments);else a.error("Method "+h+" does not exist on jQuery.evolutionHighlight")};a.fn.evolutionHighlight.defaults={ranges:[],styles:["border-top-width","border-top-style","border-bottom-width","border-bottom-style","border-right-width","border-right-width-value","border-right-style","border-right-style-value","border-left-width","border-left-width-value","border-left-style","border-left-style-value",
"font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","padding-bottom","padding-left","padding-right","padding-top","letter-spacing","line-height","text-align","text-indent","word-spacing"]}})(jQuery);
(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.html={encode:function(s){if(!s)return s;return a("<div/>").text(s).html()},decode:function(s){if(!s)return s;s=s.replace(/<[^>]*>/g," ");return a("<div/>").html(s).text()}}})(jQuery,window);
(function(a){var s={},m=function(e,f){if(e.internal.isInitialized){for(var h=f.split(/[,;]/g),l=[],n=0;n<h.length;n++){var g=a.trim(h[n]);if(g)l[l.length]=g}e.settings.onSave(l,function(){e.settings.currentTags=l})}},j=function(e){return this.each(function(){var f={settings:a.extend({},a.fn.evolutionInlineTagEditor.defaults,e||{}),internal:{state:a(this)}};a(this).data("evolutionTagInlineEditor_context",f);a(this).html()||a(this).text(f.settings.editButtonText);c(f)})},c=function(e){var f=a("<div></div>").addClass(e.settings.editorCssClass).attr("style",
"display: none;"),h=a("<textarea></textarea>").attr("cols","40").attr("rows","2");if(e.settings.allTags&&e.settings.allTags.length>0)var l=a('<input type="button" />').val(e.settings.selectTagsText);var n=a('<input type="button" />').val(e.settings.saveTagsText),g=a('<input type="button" />').val(e.settings.cancelText),k=a('<div style="white-space: nowrap; padding-top: 4px;"><table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><td align="left"></td><td align="right"></td></tr></tbody></table></div>');
k.find("td:eq(1)").append(n);k.find("td:eq(1)").append(g);l&&k.find("td:first").append(l);f.append(h);f.append(k);h.evolutionTagTextBox({allTags:e.settings.allTags});f.glowPopUpPanel({cssClass:e.settings.editorCssClass,position:"updown",zIndex:500,hideOnDocumentClick:false});a(e.internal.state).bind("click.evolutionInlineTagEditor",function(){f.glowPopUpPanel("hide").glowPopUpPanel("show",a(this));h.val(e.settings.currentTags.length>0?e.settings.currentTags.join(", "):"");return false});n.bind("click.evolutionInlineTagEditor",
function(){m(e,h.attr("value"));f.glowPopUpPanel("hide");return false});g.bind("click.evolutionInlineTagEditor",function(){f.glowPopUpPanel("hide");return false});l&&l.bind("click.evolutionInlineTagEditor",function(){h.evolutionTagTextBox("openTagSelector");return false});e.internal.state.after(f);e.internal.isInitialized=true};a.fn.evolutionInlineTagEditor=function(e){if(e in s)return s[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return j.apply(this,arguments);
else a.error("Method "+e+" does not exist on jQuery.fn.evolutionInlineTagEditor")};a.extend(a.fn.evolutionInlineTagEditor,{defaults:{allTags:[""],currentTags:[""],editorCssClass:"tags-editor",editButtonText:"Edit",selectTagsText:"Select Tags",saveTagsText:"Save",cancelText:"Cancel",onSave:function(){}}})})(jQuery);
(function(a){var s={},m=function(c,e,f){var h=s[c.toString()+"-"+e];typeof h==="undefined"?a.telligent.evolution.get({url:j.defaults.dateEndpoint,data:{date:a.telligent.evolution.formatDate(c),format:e},success:function(l){if(l&&f&&typeof l!=="undefined"&&l!==null&&l.formattedDate){s[c.toString()+"-"+e]=l.formattedDate;f(l.formattedDate)}}}):f(h)},j={formatDate:function(c,e){m(c,"date",e)},formatDateAndTime:function(c,e){m(c,"datetime",e)},formatAgoDate:function(c,e){m(c,"agodate",e)}};j.defaults=
{dateEndpoint:""};if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.language=j})(jQuery);
(function(a){var s=false,m=function(f){var h=f.settings.format;if(f.hasCount)h=h.replace(/\{count\}/gi,'<span class="like-count who-likes"></span>');if(f.hasToggle)h=h.replace(/\{toggle\}/gi,'<span class="like-toggle"><a href="#" class="internal-link"></a></span>');if(f.hasMessage)h=h.replace(/\{message\}/gi,'<span class="like-message"></span>');f.element.html(h);if(f.hasCount){f.countWrapper=f.element.find("span.like-count");f.countWrapper.html(f.settings.initialCount)}if(f.hasToggle){f.toggleLink=
f.element.find("span.like-toggle a");f.toggleLink.evolutionToggleLink({onHtml:"<span></span>"+f.settings.unlikeText,offHtml:"<span></span>"+f.settings.likeText,onTitle:"",offTitle:"",processingHtml:"<span></span>...",changeState:function(l){c(l,f)},onCssClass:"internal-link like-on",offCssClass:"internal-link like-off",processingCssClass:"internal-link processing",val:f.settings.initialState==="true"})}if(f.hasMessage){f.messageWrapper=f.element.find("span.like-message");f.messageWrapper.html(f.settings.initialMessage)}},
j=function(f,h,l){var n="";if(h.count>0){var g=0;if(l)if(h.count===1)n=f.settings.whoLikesAccessingText;else if(h.count===2){n=f.settings.whoLikesAccessingTwoText;g=-1}else{if(h.count>2){n=f.settings.whoLikesAccessingMultipleText;g=-1}}else if(h.count===1)n=f.settings.whoLikesOtherText;else if(h.count===2){g=-1;n=f.settings.whoLikesOtherTwoText}else if(h.count>2){g=-1;n=f.settings.whoLikesOtherMultipleText}n=n.replace(/\{count\}/gi,h.count+g);n=n.replace(/\{user_profile_url\}/gi,h.latestLike.User.ProfileUrl);
n=n.replace(/\{user_display_name\}/gi,h.latestLike.User.DisplayName)}a.telligent.evolution.messaging.publish("ui.like",{contentId:f.settings.contentId,contentTypeId:f.settings.contentTypeId,typeId:f.settings.typeId,count:h.count,liked:l,message:n})},c=function(f,h){f?h.settings.onLike(h.settings.contentId,h.settings.contentTypeId,h.settings.typeId,function(l){j(h,l,true)}):h.settings.onUnlike(h.settings.contentId,h.settings.contentTypeId,h.settings.typeId,function(l){j(h,l,false)})},e=function(f){a.telligent.evolution.messaging.subscribe("ui.like",
function(h){if(h.contentId===f.settings.contentId&&h.contentTypeId===f.settings.contentTypeId&&h.typeId===f.settings.typeId){f.hasToggle&&f.toggleLink.evolutionToggleLink("val",h.liked);f.hasCount&&f.countWrapper.html(h.count);f.hasMessage&&f.messageWrapper.html(h.message)}})};a.fn.evolutionLike=function(f){var h=a.extend({},a.fn.evolutionLike.defaults,f||{});return this.each(function(){var l={element:a(this),settings:h,hasCount:h.format.indexOf("{count}")>=0,hasToggle:h.format.indexOf("{toggle}")>=
0,hasMessage:h.format.indexOf("{message}")>=0};m(l);e(l)})};a.fn.evolutionLike.delegatePopups=function(f){if(!s){s=true;var h=a.extend({},a.fn.evolutionLike.defaults,f||{}),l=a.telligent.evolution.template.compile(h.likersTemplate),n=a.telligent.evolution.template.compile(h.likersPopupTemplate),g=function(d,b,r){h.onList(d.contentId,d.contentTypeId,d.typeId,function(q){r(q)},d.pageSize,b)},k=function(d,b){var r=0,q=a(l(d)),o=a(n({likers:q,hasMorePages:d.hasMorePages,showMoreText:h.modalShowMoreText})),
p=o.find("ul"),t=o.find(".show-more"),v=h.onOptions(a(b).closest(h.delegatedSelector));p.html(q);t.on("click",function(w){w.preventDefault();r++;g(v,r,function(u){p.append(l(u));u.hasMorePages?t.show():t.hide();p.scrollTop(p[0].scrollHeight)})});a.glowModal({title:h.modalTitleText,html:o,width:450})};(function(){a(h.containerSelector).on("click",h.delegatedSelector+" .who-likes",function(){var d=a(this),b=h.onOptions(a(d).closest(h.delegatedSelector));g(b,0,function(r){k(r,d)})})})()}};a.fn.evolutionLike.defaults=
{contentId:"",contentTypeId:"",typeId:"",initialState:false,initialMessage:"",initialCount:0,format:"",onLike:function(){},onUnlike:function(){},likeText:"Like",unlikeText:"Unlike",whoLikesOtherText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> likes this',whoLikesOtherTwoText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> <span class="who-likes">and 1 other</span> like this.',whoLikesOtherMultipleText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> and <span class="who-likes">{count} others</span> like this.',
whoLikesAccessingText:"You like this",whoLikesAccessingTwoText:'You and <span class="who-likes">1 other</span> like this',whoLikesAccessingMultipleText:'You and <span class="who-likes">{count} others</span> like this',modalTitleText:"People who like this",modalShowMoreText:"Show more",onList:function(){},onOptions:function(){},containerSelector:"",delegatedSelector:"",delay:500,likersTemplate:' <% foreach(likers, function(liker) { %>      <li class="content-item">          <div class="full-post-header"></div>          <div class="full-post">              <span class="avatar">                  <a href="<%: liker.profileUrl %>"  class="internal-link view-user-profile">                      <img src="<%: liker.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" />                  </a>              </span>              <span class="user-name">                  <a href="<%: liker.profileUrl %>" class="internal-link view-user-profile"><%= liker.displayName %></a>              </span>          </div>          <div class="full-post-footer"></div>      </li>  <% }); %> ',
likersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= likers %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> '}})(jQuery);jQuery(function(a){a("textarea[maxlength]").live("keyup change",function(){var s=a(this),m=s.attr("maxlength"),j=s.val();j.length>m&&s.val(j.substr(0,m))})});
(function(a){var s=function(j,c,e){var f=a.extend({},m.defaults,e||{});j={url:j,view:c};if(f.width)j.width=f.width;if(f.height)j.height=f.height;a.telligent.evolution.get({url:f.endpoint,data:j,success:function(h){h&&f.success&&f.success(h)},error:function(h,l,n){f.error&&f.error(h,l,n)}})},m={previewHtml:function(j,c){s(j,"preview",c)},viewHtml:function(j,c){s(j,"view",c)}};m.defaults={endpoint:""};if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.media=
m})(jQuery);
(function(a){var s={},m={},j=0;if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.messaging={publish:function(c,e){if(!c)throw"messageName is required when publishing a message";if(!(c===null||c.length===0)){var f=s[c];f&&a.each(f,function(h,l){if(l.handler!==null)try{l.handler.call(this,e)}catch(n){}})}},subscribe:function(c,e){if(!c)throw"messageName is required when subscribing to a message";if(c===null||c.length===0)return 0;if(typeof s[c]==="undefined")s[c]=
[];var f={message:c,handler:e,id:j++};s[c][s[c].length]=f;m[String(f.id)]=f;return f.id},unsubscribe:function(c){if(!c)throw"subscriptionId is required when unsubscribing a message";if(typeof m[String(c)]!=="undefined"){var e=m[String(c)],f=-1,h=s[e.message];a.each(h,function(l,n){if(n===e)f=l});f>=0&&h.splice(f,1);h.length===0&&delete s[e.message];delete m[String(c)]}}}})(jQuery);
(function(a){var s=a.telligent.evolution,m=function(c){c.settings.onReport(c.settings.contentId,c.settings.contentTypeId,function(e){s.messaging.publish("ui.reportabuse",{contentId:c.settings.contentId,contentTypeId:c.settings.contentTypeId});showNotification(c,e.Report)})},j=function(c){if(c.hideTimer){clearTimeout(c.hideTimer);c.hideTimer=null}};buildModerationLink=function(c){c.moderationLink=a(s.template.compile(c.settings.moderationLinkTemplate)({linkClassName:c.settings.linkClassName,resources:{moderateLinkText:c.settings.moderateLinkText}})).appendTo(c.element)};
buildModerationPopup=function(c){c.popup=a("<div></div>").glowPopUpPanel({cssClass:"content-moderation",position:"downleft",zIndex:1E3,hideOnDocumentClick:true});c.popup.bind({glowPopUpPanelShown:function(){c.moderationLink.addClass("open")},glowPopUpPanelHidden:function(){c.moderationLink.removeClass("open")}})};buildModerationMenuContent=function(c,e){c.settings.onGetAdditionalLinks(function(f){var h=[];h=c.settings.initialState?f.concat([{href:"#",className:"evolutionModerateFlagged",text:c.settings.reportedLinkText}]):
f.concat([{href:"#",className:"evolutionModerateFlag",text:c.settings.reportLinkText}]);f=a(s.template.compile(c.settings.moderationMenuTemplate)({links:h}));f.bind("mouseleave",function(){hideMenu(c)});f.bind("mouseenter",function(){j(c)});f.delegate("a","click",function(l){var n=a(l.target);if(n.hasClass("evolutionModerateFlag")){l.preventDefault();m(c)}else if(n.hasClass("evolutionModerateFlagged"))l.preventDefault();else{n.attr("href")==="#"&&l.preventDefault();c.element.trigger("evolutionModerateLinkClicked",
l.target)}});e(f)})};showMenu=function(c){c.popup||buildModerationPopup(c);buildModerationMenuContent(c,function(e){j(c);c.popup.glowPopUpPanel("html",e).glowPopUpPanel("show",c.moderationLink)})};hideMenu=function(c){if(!c.hideTimer)c.hideTimer=setTimeout(function(){c.popup.glowPopUpPanel("hide");c.hideTimer=null},200)};formatNotificationMessage=function(c,e){return c.settings.reportedNotificationMessageText.replace(/\{NAME\}/gi,e&&e.AuthorUser&&e.AuthorUser.DisplayName?e.AuthorUser.DisplayName:
"")};showNotification=function(c,e){var f=s.template.compile(c.settings.notificationTemplate)({resources:{reportedNotificationMessageText:formatNotificationMessage(c,e),undoLinkText:c.settings.undoLinkText},contextId:c.contextId});s.notifications.show(f,{type:"moderation",duration:c.settings.notificationDuration,cssClass:""})};handleFlagMessages=function(c){s.messaging.subscribe("ui.reportabuse",function(e){if(c.settings.contentId===e.contentId&&c.settings.contentTypeId===e.contentTypeId)c.settings.initialState=
true})};init=function(c){buildModerationLink(c);c.moderationLink.bind({mouseenter:function(e){e.preventDefault();c.popup&&c.popup.glowPopUpPanel("isShown")?hideMenu(c):showMenu(c);j(c)},mouseleave:function(e){!a(e.relatedTarget).is(".content-moderation")&&a(e.relatedTarget).closest(".content-moderation").length===0&&hideMenu(c)}});handleFlagMessages(c)};a.fn.evolutionModerate=function(c){var e=a.extend({},a.fn.evolutionModerate.defaults,c||{});return this.each(function(){var f={element:a(this),settings:e};
init(f)})};a.fn.evolutionModerate.defaults={contentId:"",contentTypeId:"",initialState:false,linkClassName:"",onReport:function(){},onGetAdditionalLinks:function(c){c([])},notificationDuration:5E3,moderateLinkText:"moderate",reportLinkText:"Flag as spam/abuse",reportedLinkText:"Flagged as spam/abuse",reportedNotificationMessageText:"{NAME}'s post has been flagged. <strong>Thank you for your feedback.</strong>",undoLinkText:"Undo",moderationLinkTemplate:'<a href="#" class="<%: linkClassName %>"><span></span><%= resources.moderateLinkText %></a>',
moderationMenuTemplate:'<ul class="navigation-list">   <% foreach(links, function(link){ %>       <li class="navigation-item">           <a href="<%: (link.href || "#") %>" class="<%: (link.className || "") %>"><%= link.text %></a>       </li>   <% }); %></ul>',notificationTemplate:"<p><%= resources.reportedNotificationMessageText %></p>"}})(jQuery);
(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};var s={message:"",enabled:false,ignoreClick:false},m=function(){if(!s.ignoreClick)return s.message};a.telligent.evolution.navigationConfirmation={configure:function(j){s=a.extend(s,j)},enable:function(){if(!s.enabled){window.onbeforeunload=m;s.enabled=true;a(document).bind("customizepage",function(){s.ignoreClick=true})}},register:function(j){a(j).click(function(){s.ignoreClick=true})},ignoreClick:function(){s.ignoreClick=
true}}})(jQuery);
(function(a,s){a.telligent=a.telligent||{};a.telligent.evolution=a.telligent.evolution||{};var m={duration:9999,width:300,type:"directions",cssClass:"menu notification notification__menu"},j=null,c=null,e=300,f=false,h=function(){j&&j.glowPopUpPanel("isShown")&&j.glowPopUpPanel("show",(a(s).width()-e)/2,a(s).scrollTop(),e,0,true)};a.telligent.evolution.notifications={show:function(l,n){n=a.extend({},m,n||{});if(!j){j=a("<div></div>").glowPopUpPanel({cssClass:n.cssClass,position:"down",zIndex:1E4,
hideOnDocumentClick:false}).bind("glowPopUpPanelMouseOver",function(){f=true}).bind("glowPopUpPanelMouseOut",function(){f=false});a(s).bind("scroll",h)}s.clearTimeout(c);j.glowPopUpPanel("isShown")&&j.glowPopUpPanel("hide");e=n.width;j.glowPopUpPanel("html",'<div class="message '+n.type+'" style="width:'+n.width+'px">'+l+"</div>").glowPopUpPanel("show",(a(s).width()-n.width)/2,a(s).scrollTop(),n.width,0);c=s.setTimeout(function(){a.telligent.evolution.notifications.hide(n.callback)},n.duration)},
hide:function(l){if(j){s.clearTimeout(c);if(f)c=s.setTimeout(function(){a.telligent.evolution.notifications.hide(l)},249);else{j.glowPopUpPanel("hide");l&&typeof l==="function"&&l()}}}}})(jQuery,window);
(function(a){var s={},m={},j={},c=function(k){var d=[],b=k.settings,r=function(p){var t={};t[b.pageKey]=p;p={url:b.baseUrl,query:t};if(b.hash&&b.hash.length>0)p[b.hash]=b.hash;return a.telligent.evolution.url.modify(p)};if(b.totalItems===0||b.pageSize===0)k=0;else{k=Math.floor(b.totalItems/b.pageSize);if(b.totalItems%b.pageSize>0)k+=1}if(k>1){if(b.showFirst)if(b.currentPage>=3&&k>b.numberOfPagesToDisplay)d[d.length]={type:"first",selected:false,page:1,url:r(1)};if(b.showPrevious)if(b.currentPage>
0)d[d.length]={type:"previous",selected:false,page:b.currentPage,url:r(b.currentPage)};if(b.showIndividualPages){var q;q=k<b.numberOfPagesToDisplay||b.currentPage-Math.floor(b.numberOfPagesToDisplay/2)<0?0:b.currentPage+Math.floor(b.numberOfPagesToDisplay/2)>=k?k-b.numberOfPagesToDisplay:b.currentPage-Math.floor(b.numberOfPagesToDisplay/2);var o;o=Math.floor(b.numberOfPagesToDisplay/2);if(b.numberOfPagesToDisplay%2===0)o-=1;o=k<b.numberOfPagesToDisplay||b.currentPage+o>=k?k-1:b.currentPage-Math.floor(b.numberOfPagesToDisplay/
2)<0?b.numberOfPagesToDisplay-1:b.currentPage+o;for(q=q;q<=o;q++)d[d.length]={type:"page",selected:b.currentPage===q,page:q+1,url:r(q+1)}}if(b.showNext)if(b.currentPage+1<k)d[d.length]={type:"next",selected:false,page:b.currentPage+2,url:r(b.currentPage+2)};if(b.showLast)if(b.currentPage+3<k&&k>b.numberOfPagesToDisplay)d[d.length]={type:"last",selected:false,page:k,url:r(k)}}return d},e=function(k){var d=k.template({links:k.links});k.selection.html(d)},f=function(k){var d=parseInt(a.telligent.evolution.url.hashData()[k.settings.pageKey],
10);if(!isNaN(d)&&d!==k.settings.currentPage)if(!j[k.settings.pageKey]){j[k.settings.pageKey]=true;k.settings.onPage(d,function(b){k.currentPageIndex=d;g(k,d,0,b,false)})}},h=function(k){a(k.selection).delegate("a","click",function(d){d.preventDefault();d=a(this);var b={};b[k.settings.pageKey]=d.data("page");a.telligent.evolution.url.hashData(b)})},l=function(k){if(!s[k.settings.pageKey]){s[k.settings.pageKey]=true;k.currentPageIndex=parseInt(a.telligent.evolution.url.hashData()[k.settings.pageKey],
10);if(isNaN(k.currentPageIndex))k.currentPageIndex=k.settings.currentPage;a(window).bind("hashchange",function(){var d=parseInt(a.telligent.evolution.url.hashData()[k.settings.pageKey],10);if(!isNaN(d))if(k.currentPageIndex!==d){k.newPageIndex=d;var b={currentPage:k.currentPageIndex,newPage:k.newPageIndex,container:k.settings.pagedContentContainer};a.telligent.evolution.messaging.publish(k.settings.pagedContentPagingEvent,b);k.selection.trigger("evolutionPagerPaging",b);k.currentPageIndex=d}})}},
n=function(k){if(m[k.settings.pagedContentPagingEvent]){k.currentPageIndex=parseInt(a.telligent.evolution.url.hashData()[k.settings.pageKey],10);a.telligent.evolution.messaging.unsubscribe(m[k.settings.pagedContentPagingEvent])}m[k.settings.pagedContentPagingEvent]=a.telligent.evolution.messaging.subscribe(k.settings.pagedContentPagingEvent,function(d){if(!j[k.settings.pageKey]){j[k.settings.pageKey]=true;k.settings.onPage(d.newPage,function(b){k.currentPageIndex=d.newPage;g(k,d.newPage,d.currentPage,
b,true)})}})},g=function(k,d,b,r,q){var o=function(){var p={page:d,container:k.settings.pagedContentContainer};a.telligent.evolution.messaging.publish(k.settings.pagedContentPagedEvent,p);k.selection.trigger("evolutionPagerPaged",p)};if(q&&(k.settings.transition==="slide"||k.settings.transition==="fade")){q="fade";if(k.settings.transition==="slide")q=d<b?"slideRight":"slideLeft";b=a(k.settings.pagedContentContainer);r=a("<div></div>").attr("id",b.attr("id")).html(r).hide().insertAfter(k.settings.pagedContentContainer);
b.glowTransition(r,{type:q,duration:k.settings.transitionDuration,complete:function(){a(k.settings.pagedContentContainer).css({width:"",height:"",overflow:"hidden"});o();j[k.settings.pageKey]=false}})}else{a(k.settings.pagedContentContainer).html(r);o();j[k.settings.pageKey]=false}k.settings.currentPage=d-1;k.links=c(k);e(k)};a.fn.evolutionPager=function(k){k=a.extend({},a.fn.evolutionPager.defaults,k||{});var d={selection:this,settings:k,template:a.telligent.evolution.template.compile(k.template)};
d.links=c(d);e(d);if(k.onPage&&k.pagedContentContainer&&k.pagedContentContainer.length>0){n(d);l(d);h(d);f(d)}return this};a.fn.evolutionPager.defaults={currentPage:0,pageSize:10,totalItems:0,showPrevious:false,showNext:false,showFirst:true,showLast:true,showIndividualPages:true,numberOfPagesToDisplay:5,pageKey:"pi",hash:"",baseUrl:window.location.href,onPage:function(){},pagedContentContainer:"",pagedContentPagingEvent:"ui.page.paging",pagedContentPagedEvent:"ui.page.paged",transition:null,transitionDuration:250,
template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false">              <span>&#171;</span>          </a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false">              <span>&#60;</span>          </a>      <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>">              <span><%= link.page %></span>          </a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false">              <span>&#62;</span>          </a>      <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false">              <span>&#187;</span>          </a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '}})(jQuery);
(function(){function a(){this.returnValue=false}function s(){this.cancelBubble=true}var m=0,j=[],c={},e={},f={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},h=/[<>&\"\']/g,l=window.setTimeout,n={},g;(function(d){d=d.split(/,/);var b,r,q;for(b=0;b<d.length;b+=2){q=d[b+1].split(/ /);for(r=0;r<q.length;r++)e[q[r]]=d[b]}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");
var k={VERSION:"1.5.4",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:e,ua:function(){var d=navigator,b=d.userAgent,r=d.vendor,q,o;o=(q=/WebKit/.test(b))&&r.indexOf("Apple")!==-1;r=window.opera&&window.opera.buildNumber;return{windows:navigator.platform.indexOf("Win")!==-1,
ie:!q&&!r&&/MSIE/gi.test(b)&&/Explorer/gi.test(d.appName),webkit:q,gecko:!q&&/Gecko/.test(b),safari:o,opera:!!r}}(),typeOf:function(d){return{}.toString.call(d).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(d){k.each(arguments,function(b,r){r>0&&k.each(b,function(q,o){d[o]=q})});return d},cleanName:function(d){var b,r;r=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,
"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(b=0;b<r.length;b+=2)d=d.replace(r[b],r[b+1]);d=d.replace(/\s+/g,"_");return d=d.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(d,b){b.name=d;j[d]=b;j.push(b);return b},guid:function(){var d=(new Date).getTime().toString(32),b;for(b=0;b<5;b++)d+=Math.floor(Math.random()*65535).toString(32);return(k.guidPrefix||"p")+d+(m++).toString(32)},buildUrl:function(d,b){var r="";k.each(b,function(q,o){r+=(r?"&":"")+encodeURIComponent(o)+
"="+encodeURIComponent(q)});if(r)d+=(d.indexOf("?")>0?"&":"?")+r;return d},each:function(d,b){var r,q;if(d){r=d.length;if(r===void 0)for(q in d){if(d.hasOwnProperty(q))if(b(d[q],q)===false)break}else for(q=0;q<r;q++)if(b(d[q],q)===false)break}},formatSize:function(d){if(d===void 0||/\D/.test(d))return k.translate("N/A");if(d>1073741824)return Math.round(d/1073741824,1)+" GB";if(d>1048576)return Math.round(d/1048576,1)+" MB";if(d>1024)return Math.round(d/1024,1)+" KB";return d+" b"},getPos:function(d,
b){function r(v){var w,u=0;w=0;if(v){w=v.getBoundingClientRect();v=t.compatMode==="CSS1Compat"?t.documentElement:t.body;u=w.left+v.scrollLeft;w=w.top+v.scrollTop}return{x:u,y:w}}var q=0,o=0,p,t=document;d=d;b=b||t.body;if(d&&d.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&t.documentMode<8){q=r(d);o=r(b);return{x:q.x-o.x,y:q.y-o.y}}for(p=d;p&&p!=b&&p.nodeType;){q+=p.offsetLeft||0;o+=p.offsetTop||0;p=p.offsetParent}for(p=d.parentNode;p&&p!=b&&p.nodeType;){q-=p.scrollLeft||0;o-=p.scrollTop||
0;p=p.parentNode}return{x:q,y:o}},getSize:function(d){return{w:d.offsetWidth||d.clientWidth,h:d.offsetHeight||d.clientHeight}},parseSize:function(d){var b;if(typeof d=="string"){d=/^([0-9]+)([mgk]?)$/.exec(d.toLowerCase().replace(/[^0-9mkg]/g,""));b=d[2];d=+d[1];if(b=="g")d*=1073741824;if(b=="m")d*=1048576;if(b=="k")d*=1024}return d},xmlEncode:function(d){return d?(""+d).replace(h,function(b){return f[b]?"&"+f[b]+";":b}):d},toArray:function(d){var b,r=[];for(b=0;b<d.length;b++)r[b]=d[b];return r},
inArray:function(d,b){if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,d);for(var r=0,q=b.length;r<q;r++)if(b[r]===d)return r}return-1},addI18n:function(d){return k.extend(c,d)},translate:function(d){return c[d]||d},isEmptyObj:function(d){if(d===void 0)return true;for(var b in d)return false;return true},hasClass:function(d,b){if(d.className=="")return false;return RegExp("(^|\\s+)"+b+"(\\s+|$)").test(d.className)},addClass:function(d,b){if(!k.hasClass(d,b))d.className=d.className==
""?b:d.className.replace(/\s+$/,"")+" "+b},removeClass:function(d,b){d.className=d.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),function(r,q,o){return q===" "&&o===" "?" ":""})},getStyle:function(d,b){if(d.currentStyle)return d.currentStyle[b];else if(window.getComputedStyle)return window.getComputedStyle(d,null)[b]},addEvent:function(d,b,r,q){var o;b=b.toLowerCase();if(g===void 0)g="Plupload_"+k.guid();if(d.addEventListener){o=r;d.addEventListener(b,o,false)}else if(d.attachEvent){o=function(){var p=
window.event;if(!p.target)p.target=p.srcElement;p.preventDefault=a;p.stopPropagation=s;r(p)};d.attachEvent("on"+b,o)}if(d[g]===void 0)d[g]=k.guid();n.hasOwnProperty(d[g])||(n[d[g]]={});d=n[d[g]];d.hasOwnProperty(b)||(d[b]=[]);d[b].push({func:o,orig:r,key:q})},removeEvent:function(d,b,r){var q,o;if(typeof r=="function")q=r;else o=r;b=b.toLowerCase();if(d[g]&&n[d[g]]&&n[d[g]][b]){r=n[d[g]][b];for(var p=r.length-1;p>=0;p--)if(r[p].key===o||r[p].orig===q){if(d.removeEventListener)d.removeEventListener(b,
r[p].func,false);else d.detachEvent&&d.detachEvent("on"+b,r[p].func);r[p].orig=null;r[p].func=null;r.splice(p,1);if(q!==void 0)break}r.length||delete n[d[g]][b];if(k.isEmptyObj(n[d[g]])){delete n[d[g]];try{delete d[g]}catch(t){d[g]=void 0}}}},removeAllEvents:function(d,b){d[g]===void 0||!d[g]||k.each(n[d[g]],function(r,q){k.removeEvent(d,q,b)})}};k.Uploader=function(d){function b(){var w,u=0,x;if(this.state==k.STARTED){for(x=0;x<p.length;x++)if(!w&&p[x].status==k.QUEUED){w=p[x];w.status=k.UPLOADING;
this.trigger("BeforeUpload",w)&&this.trigger("UploadFile",w)}else u++;if(u==p.length){this.stop();this.trigger("UploadComplete",p)}}}function r(){var w,u;o.reset();for(w=0;w<p.length;w++){u=p[w];if(u.size!==void 0){o.size+=u.size;o.loaded+=u.loaded}else o.size=void 0;if(u.status==k.DONE)o.uploaded++;else if(u.status==k.FAILED)o.failed++;else o.queued++}if(o.size===void 0)o.percent=p.length>0?Math.ceil(o.uploaded/p.length*100):0;else{o.bytesPerSec=Math.ceil(o.loaded/((+new Date-t||1)/1E3));o.percent=
o.size>0?Math.ceil(o.loaded/o.size*100):0}}var q={},o,p=[],t,v=false;o=new k.QueueProgress;d=k.extend({chunk_size:0,multipart:true,multi_selection:true,file_data_name:"file",filters:[]},d);k.extend(this,{state:k.STOPPED,runtime:"",features:{},files:p,settings:d,total:o,id:k.guid(),init:function(){function w(){var B=y[z++],C,E,D;if(B){C=B.getFeatures();if(E=u.settings.required_features){E=E.split(",");for(D=0;D<E.length;D++)if(!C[E[D]]){w();return}}B.init(u,function(H){if(H&&H.success){u.features=
C;u.runtime=B.name;u.trigger("Init",{runtime:B.name});u.trigger("PostInit");u.refresh()}else w()})}else u.trigger("Error",{code:k.INIT_ERROR,message:k.translate("Init error.")})}var u=this,x,y,z=0,A;typeof d.preinit=="function"?d.preinit(u):k.each(d.preinit,function(B,C){u.bind(C,B)});d.page_url=d.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(d.url))d.url=d.page_url+d.url;d.chunk_size=k.parseSize(d.chunk_size);d.max_file_size=k.parseSize(d.max_file_size);
u.bind("FilesAdded",function(B,C){var E,D,H=0,G;if((E=d.filters)&&E.length){G=[];k.each(E,function(J){k.each(J.extensions.split(/,/),function(L){/^\s*\*\s*$/.test(L)?G.push("\\.*"):G.push("\\."+L.replace(RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})});G=RegExp(G.join("|")+"$","i")}for(E=0;E<C.length;E++){D=C[E];D.loaded=0;D.percent=0;D.status=k.QUEUED;if(G&&!G.test(D.name))B.trigger("Error",{code:k.FILE_EXTENSION_ERROR,message:k.translate("File extension error."),file:D});
else if(D.size!==void 0&&D.size>d.max_file_size)B.trigger("Error",{code:k.FILE_SIZE_ERROR,message:k.translate("File size error."),file:D});else{p.push(D);H++}}if(H)l(function(){u.trigger("QueueChanged");u.refresh()},1);else return false});d.unique_names&&u.bind("UploadFile",function(B,C){var E=C.name.match(/\.([^.]+)$/),D="tmp";if(E)D=E[1];C.target_name=C.id+"."+D});u.bind("UploadProgress",function(B,C){C.percent=C.size>0?Math.ceil(C.loaded/C.size*100):100;r()});u.bind("StateChanged",function(B){if(B.state==
k.STARTED)t=+new Date;else if(B.state==k.STOPPED)for(x=B.files.length-1;x>=0;x--)if(B.files[x].status==k.UPLOADING){B.files[x].status=k.QUEUED;r()}});u.bind("QueueChanged",r);u.bind("Error",function(B,C){if(C.file){C.file.status=k.FAILED;r();B.state==k.STARTED&&l(function(){b.call(u)},1)}});u.bind("FileUploaded",function(B,C){C.status=k.DONE;C.loaded=C.size;B.trigger("UploadProgress",C);l(function(){b.call(u)},1)});if(d.runtimes){y=[];A=d.runtimes.split(/\s?,\s?/);for(x=0;x<A.length;x++)j[A[x]]&&
y.push(j[A[x]])}else y=j;w();typeof d.init=="function"?d.init(u):k.each(d.init,function(B,C){u.bind(C,B)})},refresh:function(){this.trigger("Refresh")},start:function(){if(p.length&&this.state!=k.STARTED){this.state=k.STARTED;this.trigger("StateChanged");b.call(this)}},stop:function(){if(this.state!=k.STOPPED){this.state=k.STOPPED;this.trigger("CancelUpload");this.trigger("StateChanged")}},disableBrowse:function(w){v=w!==void 0?w:true;this.trigger("DisableBrowse",v)},getFile:function(w){var u;for(u=
p.length-1;u>=0;u--)if(p[u].id===w)return p[u]},removeFile:function(w){var u;for(u=p.length-1;u>=0;u--)if(p[u].id===w.id)return this.splice(u,1)[0]},splice:function(w,u){var x;x=p.splice(w===void 0?0:w,u===void 0?p.length:u);this.trigger("FilesRemoved",x);this.trigger("QueueChanged");return x},trigger:function(w){var u=q[w.toLowerCase()],x,y;if(u){y=Array.prototype.slice.call(arguments);y[0]=this;for(x=0;x<u.length;x++)if(u[x].func.apply(u[x].scope,y)===false)return false}return true},hasEventListener:function(w){return!!q[w.toLowerCase()]},
bind:function(w,u,x){var y;w=w.toLowerCase();y=q[w]||[];y.push({func:u,scope:x||this});q[w]=y},unbind:function(w,u){w=w.toLowerCase();var x=q[w],y;if(x){if(u!==void 0)for(y=x.length-1;y>=0;y--){if(x[y].func===u){x.splice(y,1);break}}else x=[];x.length||delete q[w]}},unbindAll:function(){var w=this;k.each(q,function(u,x){w.unbind(x)})},destroy:function(){this.stop();this.trigger("Destroy");this.unbindAll()}})};k.File=function(d,b,r){this.id=d;this.name=b;this.size=r;this.status=this.percent=this.loaded=
0};k.Runtime=function(){this.getFeatures=function(){};this.init=function(){}};k.QueueProgress=function(){var d=this;d.size=0;d.loaded=0;d.uploaded=0;d.failed=0;d.queued=0;d.percent=0;d.bytesPerSec=0;d.reset=function(){d.size=d.loaded=d.uploaded=d.failed=d.queued=d.percent=d.bytesPerSec=0}};k.runtimes={};window.plupload=k})();
(function(a,s,m){function j(){var f;try{f=navigator.plugins["Shockwave Flash"];f=f.description}catch(h){try{f=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(l){f="0.0"}}f=f.match(/\d+/g);return parseFloat(f[0]+"."+f[1])}var c={},e={};m.flash={trigger:function(f,h,l){setTimeout(function(){var n=c[f];n&&n.trigger("Flash:"+h,l)},0)}};m.runtimes.Flash=m.addRuntime("flash",{getFeatures:function(){return{jpgresize:true,pngresize:true,maxWidth:8091,maxHeight:8091,chunks:true,
progress:true,multipart:true,multi_selection:true}},init:function(f,h){function l(){return s.getElementById(f.id+"_flash")}function n(){if(k++>5E3)h({success:false});else e[f.id]===false&&setTimeout(n,1)}var g,k=0,d=s.body;if(j()<10)h({success:false});else{e[f.id]=false;c[f.id]=f;s.getElementById(f.settings.browse_button);g=s.createElement("div");g.id=f.id+"_flash_container";m.extend(g.style,{position:"absolute",top:"0px",background:f.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",
height:"100%"});g.className="plupload flash";if(f.settings.container){d=s.getElementById(f.settings.container);if(m.getStyle(d,"position")==="static")d.style.position="relative"}d.appendChild(g);(function(){var b,r;b='<object id="'+f.id+'_flash" type="application/x-shockwave-flash" data="'+f.settings.flash_swf_url+'" ';if(m.ua.ie)b+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ';b+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+f.settings.flash_swf_url+'" /><param name="flashvars" value="id='+
escape(f.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';if(m.ua.ie){r=s.createElement("div");g.appendChild(r);r.outerHTML=b}else g.innerHTML=b})();n();g=null;f.bind("Destroy",function(b){m.removeAllEvents(s.body,b.id);delete e[b.id];delete c[b.id];(b=s.getElementById(b.id+"_flash_container"))&&d.removeChild(b)});f.bind("Flash:Init",function(){var b={};try{l().setFileFilters(f.settings.filters,f.settings.multi_selection)}catch(r){h({success:false});
return}if(!e[f.id]){e[f.id]=true;f.bind("UploadFile",function(q,o){var p=q.settings,t=f.settings.resize||{};l().uploadFile(b[o.id],p.url,{name:o.target_name||o.name,mime:m.mimeTypes[o.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:p.chunk_size,width:t.width,height:t.height,quality:t.quality,multipart:p.multipart,multipart_params:p.multipart_params||{},file_data_name:p.file_data_name,format:/\.(jpg|jpeg)$/i.test(o.name)?"jpg":"png",headers:p.headers,urlstream_upload:p.urlstream_upload})});
f.bind("CancelUpload",function(){l().cancelUpload()});f.bind("Flash:UploadProcess",function(q,o){var p=q.getFile(b[o.id]);if(p.status!=m.FAILED){p.loaded=o.loaded;p.size=o.size;q.trigger("UploadProgress",p)}});f.bind("Flash:UploadChunkComplete",function(q,o){var p=q.getFile(b[o.id]);q.trigger("ChunkUploaded",p,{chunk:o.chunk,chunks:o.chunks,response:o.text});p.status!==m.FAILED&&q.state!==m.STOPPED&&l().uploadNextChunk();if(o.chunk==o.chunks-1){p.status=m.DONE;q.trigger("FileUploaded",p,{response:o.text})}});
f.bind("Flash:SelectFiles",function(q,o){var p,t,v=[],w;for(t=0;t<o.length;t++){p=o[t];w=m.guid();b[w]=p.id;b[p.id]=w;v.push(new m.File(w,p.name,p.size))}v.length&&f.trigger("FilesAdded",v)});f.bind("Flash:SecurityError",function(q,o){f.trigger("Error",{code:m.SECURITY_ERROR,message:m.translate("Security error."),details:o.message,file:f.getFile(b[o.id])})});f.bind("Flash:GenericError",function(q,o){f.trigger("Error",{code:m.GENERIC_ERROR,message:m.translate("Generic error."),details:o.message,file:f.getFile(b[o.id])})});
f.bind("Flash:IOError",function(q,o){f.trigger("Error",{code:m.IO_ERROR,message:m.translate("IO error."),details:o.message,file:f.getFile(b[o.id])})});f.bind("Flash:ImageError",function(q,o){f.trigger("Error",{code:parseInt(o.code,10),message:m.translate("Image error."),file:f.getFile(b[o.id])})});f.bind("Flash:StageEvent:rollOver",function(q){var o;o=s.getElementById(f.settings.browse_button);q=q.settings.browse_button_hover;o&&q&&m.addClass(o,q)});f.bind("Flash:StageEvent:rollOut",function(q){var o;
o=s.getElementById(f.settings.browse_button);q=q.settings.browse_button_hover;o&&q&&m.removeClass(o,q)});f.bind("Flash:StageEvent:mouseDown",function(q){var o,p;o=s.getElementById(f.settings.browse_button);p=q.settings.browse_button_active;if(o&&p){m.addClass(o,p);m.addEvent(s.body,"mouseup",function(){m.removeClass(o,p)},q.id)}});f.bind("Flash:StageEvent:mouseUp",function(q){var o;o=s.getElementById(f.settings.browse_button);q=q.settings.browse_button_active;o&&q&&m.removeClass(o,q)});f.bind("Flash:ExifData",
function(q,o){f.trigger("ExifData",f.getFile(b[o.id]),o.data)});f.bind("Flash:GpsData",function(q,o){f.trigger("GpsData",f.getFile(b[o.id]),o.data)});f.bind("QueueChanged",function(){f.refresh()});f.bind("FilesRemoved",function(q,o){var p;for(p=0;p<o.length;p++)l().removeFile(b[o[p].id])});f.bind("StateChanged",function(){f.refresh()});f.bind("Refresh",function(q){var o,p;l().setFileFilters(f.settings.filters,f.settings.multi_selection);if(o=s.getElementById(q.settings.browse_button)){p=m.getPos(o,
s.getElementById(q.settings.container));o=m.getSize(o);m.extend(s.getElementById(q.id+"_flash_container").style,{top:p.y+"px",left:p.x+"px",width:o.w+"px",height:o.h+"px"})}});f.bind("DisableBrowse",function(q,o){l().disableBrowse(o)});h({success:true})}})}}})})(window,document,plupload);
(function(a,s,m,j){function c(d,b){var r;if("FileReader"in a){r=new FileReader;r.readAsDataURL(d);r.onload=function(){b(r.result)}}else return b(d.getAsDataURL())}function e(d,b){var r;if("FileReader"in a){r=new FileReader;r.readAsBinaryString(d);r.onload=function(){b(r.result)}}else return b(d.getAsBinary())}function f(d,b,r,q){var o,p,t,v,w=this;c(g[d.id],function(u){o=s.createElement("canvas");o.style.display="none";s.body.appendChild(o);p=o.getContext("2d");t=new Image;t.onerror=t.onabort=function(){q({success:false})};
t.onload=function(){var x,y,z,A;if(!b.width)b.width=t.width;if(!b.height)b.height=t.height;v=Math.min(b.width/t.width,b.height/t.height);if(v<1||v===1&&r==="image/jpeg"){x=Math.round(t.width*v);y=Math.round(t.height*v);o.width=x;o.height=y;p.drawImage(t,0,0,x,y);if(r==="image/jpeg"){z=new l(atob(u.substring(u.indexOf("base64,")+7)));if(z.headers&&z.headers.length){A=new n;if(A.init(z.get("exif")[0])){A.setExif("PixelXDimension",x);A.setExif("PixelYDimension",y);z.set("exif",A.getBinary());w.hasEventListener("ExifData")&&
w.trigger("ExifData",d,A.EXIF());w.hasEventListener("GpsData")&&w.trigger("GpsData",d,A.GPS())}}if(b.quality)try{u=o.toDataURL(r,b.quality/100)}catch(B){u=o.toDataURL(r)}}else u=o.toDataURL(r);u=u.substring(u.indexOf("base64,")+7);u=atob(u);if(z&&z.headers&&z.headers.length){u=z.restore(u);z.purge()}o.parentNode.removeChild(o);q({success:true,data:u})}else q({success:false})};t.src=u})}function h(){function d(o,p){var t=r?0:-8*(p-1),v=0,w;for(w=0;w<p;w++)v|=q.charCodeAt(o+w)<<Math.abs(t+w*8);return v}
function b(o,p,t){t=arguments.length===3?t:q.length-p-1;q=q.substr(0,p)+o+q.substr(t+p)}var r=false,q;return{II:function(o){if(o===j)return r;else r=o},init:function(o){r=false;q=o},SEGMENT:function(o,p,t){switch(arguments.length){case 1:return q.substr(o,q.length-o-1);case 2:return q.substr(o,p);case 3:b(t,o,p);break;default:return q}},BYTE:function(o){return d(o,1)},SHORT:function(o){return d(o,2)},LONG:function(o,p){if(p===j)return d(o,4);else{var t="",v=r?0:-24,w;for(w=0;w<4;w++)t+=String.fromCharCode(p>>
Math.abs(v+w*8)&255);b(t,o,4)}},SLONG:function(o){o=d(o,4);return o>2147483647?o-4294967296:o},STRING:function(o,p){var t="";for(p+=o;o<p;o++)t+=String.fromCharCode(d(o,1));return t}}}function l(d){var b={65505:{app:"EXIF",name:"APP1",signature:"Exif\u0000"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\u0000"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\u0000"}},r=[],q,o,p=j,t=0;q=new h;q.init(d);if(q.SHORT(0)===65496){o=2;for(d=Math.min(1048576,d.length);o<=d;){p=q.SHORT(o);if(p>=
65488&&p<=65495)o+=2;else{if(p===65498||p===65497)break;t=q.SHORT(o+2)+2;b[p]&&q.STRING(o+4,b[p].signature.length)===b[p].signature&&r.push({hex:p,app:b[p].app.toUpperCase(),name:b[p].name.toUpperCase(),start:o,length:t,segment:q.SEGMENT(o,t)});o+=t}}q.init(null);return{headers:r,restore:function(v){q.init(v);var w=new l(v);if(!w.headers)return false;for(v=w.headers.length;v>0;v--){var u=w.headers[v-1];q.SEGMENT(u.start,u.length,"")}w.purge();o=q.SHORT(2)==65504?4+q.SHORT(4):2;v=0;for(w=r.length;v<
w;v++){q.SEGMENT(o,0,r[v].segment);o+=r[v].length}return q.SEGMENT()},get:function(v){for(var w=[],u=0,x=r.length;u<x;u++)r[u].app===v.toUpperCase()&&w.push(r[u].segment);return w},set:function(v,w){var u=[];if(typeof w==="string")u.push(w);else u=w;for(var x=ii=0,y=r.length;x<y;x++){if(r[x].app===v.toUpperCase()){r[x].segment=u[ii];r[x].length=u[ii].length;ii++}if(ii>=u.length)break}},purge:function(){r=[];q.init(null)}}}}function n(){function d(p,t){var v=b.SHORT(p),w,u,x,y,z,A=[],B={};for(w=0;w<
v;w++){z=p+12*w+2;x=t[b.SHORT(z)];if(x!==j){u=b.SHORT(z+=2);y=b.LONG(z+=2);z+=4;A=[];switch(u){case 1:case 7:if(y>4)z=b.LONG(z)+q.tiffHeader;for(u=0;u<y;u++)A[u]=b.BYTE(z+u);break;case 2:if(y>4)z=b.LONG(z)+q.tiffHeader;B[x]=b.STRING(z,y-1);continue;case 3:if(y>2)z=b.LONG(z)+q.tiffHeader;for(u=0;u<y;u++)A[u]=b.SHORT(z+u*2);break;case 4:if(y>1)z=b.LONG(z)+q.tiffHeader;for(u=0;u<y;u++)A[u]=b.LONG(z+u*4);break;case 5:z=b.LONG(z)+q.tiffHeader;for(u=0;u<y;u++)A[u]=b.LONG(z+u*4)/b.LONG(z+u*4+4);break;case 9:z=
b.LONG(z)+q.tiffHeader;for(u=0;u<y;u++)A[u]=b.SLONG(z+u*4);break;case 10:z=b.LONG(z)+q.tiffHeader;for(u=0;u<y;u++)A[u]=b.SLONG(z+u*4)/b.SLONG(z+u*4+4);break;default:continue}y=y==1?A[0]:A;B[x]=o.hasOwnProperty(x)&&typeof y!="object"?o[x][y]:y}}return B}var b,r,q={},o;b=new h;r={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",
34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};o={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",
6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",
7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",
71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},
ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};return{init:function(p){q={tiffHeader:10};
if(p===j||!p.length)return false;b.init(p);if(b.SHORT(0)===65505&&b.STRING(4,5).toUpperCase()==="EXIF\u0000"){p=j;p=q.tiffHeader;b.II(b.SHORT(p)==18761);if(b.SHORT(p+=2)!==42)p=false;else{q.IFD0=q.tiffHeader+b.LONG(p+2);p=d(q.IFD0,r.tiff);q.exifIFD="ExifIFDPointer"in p?q.tiffHeader+p.ExifIFDPointer:j;q.gpsIFD="GPSInfoIFDPointer"in p?q.tiffHeader+p.GPSInfoIFDPointer:j;p=true}return p}return false},EXIF:function(){var p;p=d(q.exifIFD,r.exif);if(p.ExifVersion&&m.typeOf(p.ExifVersion)==="array"){for(var t=
0,v="";t<p.ExifVersion.length;t++)v+=String.fromCharCode(p.ExifVersion[t]);p.ExifVersion=v}return p},GPS:function(){var p;p=d(q.gpsIFD,r.gps);if(p.GPSVersionID)p.GPSVersionID=p.GPSVersionID.join(".");return p},setExif:function(p,t){if(p!=="PixelXDimension"&&p!=="PixelYDimension")return false;var v;v=p;var w,u,x,y=0;if(typeof v==="string"){w=r["exif".toLowerCase()];for(hex in w)if(w[hex]===v){v=hex;break}}w=q["exif".toLowerCase()+"IFD"];u=b.SHORT(w);for(i=0;i<u;i++){x=w+12*i+2;if(b.SHORT(x)==v){y=
x+8;break}}if(y){b.LONG(y,t);v=true}else v=false;return v},getBinary:function(){return b.SEGMENT()}}}var g={},k;m.runtimes.Html5=m.addRuntime("html5",{getFeatures:function(){var d,b,r,q,o,p;b=r=o=p=false;if(a.XMLHttpRequest){d=new XMLHttpRequest;r=!!d.upload;b=!!(d.sendAsBinary||d.upload)}if(b){q=!!(d.sendAsBinary||a.Uint8Array&&a.ArrayBuffer);o=!!(File&&(File.prototype.getAsDataURL||a.FileReader)&&q);p=!!(File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))}k=m.ua.safari&&
m.ua.windows;return{html5:b,dragdrop:function(){var t=s.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t}(),jpgresize:o,pngresize:o,multipart:o||!!a.FileReader||!!a.FormData,canSendBinary:q,cantSendBlobInFormData:!!(m.ua.gecko&&a.FormData&&a.FileReader&&!FileReader.prototype.readAsArrayBuffer),progress:r,chunks:p,multi_selection:!(m.ua.safari&&m.ua.windows),triggerDialog:m.ua.gecko&&a.FormData||m.ua.webkit}},init:function(d,b){function r(p){var t,v,w=[],u,x={};for(v=0;v<
p.length;v++){t=p[v];if(!x[t.name]){x[t.name]=true;u=m.guid();g[u]=t;w.push(new m.File(u,t.fileName||t.name,t.fileSize||t.size))}}w.length&&d.trigger("FilesAdded",w)}var q,o;q=this.getFeatures();if(q.html5){d.bind("Init",function(p){var t,v,w=[],u,x,y=p.settings.filters,z,A;u=s.body;t=s.createElement("div");t.id=p.id+"_html5_container";m.extend(t.style,{position:"absolute",background:d.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:d.settings.shim_bgcolor?
"":0});t.className="plupload html5";if(d.settings.container){u=s.getElementById(d.settings.container);if(m.getStyle(u,"position")==="static")u.style.position="relative"}u.appendChild(t);u=0;a:for(;u<y.length;u++){z=y[u].extensions.split(/,/);for(x=0;x<z.length;x++){if(z[x]==="*"){w=[];break a}(A=m.mimeTypes[z[x]])&&m.inArray(A,w)===-1&&w.push(A)}}t.innerHTML='<input id="'+d.id+'_html5"  style="font-size:999px" type="file" accept="'+w.join(",")+'" '+(d.settings.multi_selection&&d.features.multi_selection?
'multiple="multiple"':"")+" />";t.scrollTop=100;w=s.getElementById(d.id+"_html5");p.features.triggerDialog?m.extend(w.style,{position:"absolute",width:"100%",height:"100%"}):m.extend(w.style,{cssFloat:"right",styleFloat:"right"});w.onchange=function(){r(this.files);this.value=""};if(v=s.getElementById(p.settings.browse_button)){var B=p.settings.browse_button_hover,C=p.settings.browse_button_active;t=p.features.triggerDialog?v:t;if(B){m.addEvent(t,"mouseover",function(){m.addClass(v,B)},p.id);m.addEvent(t,
"mouseout",function(){m.removeClass(v,B)},p.id)}if(C){m.addEvent(t,"mousedown",function(){m.addClass(v,C)},p.id);m.addEvent(s.body,"mouseup",function(){m.removeClass(v,C)},p.id)}p.features.triggerDialog&&m.addEvent(v,"click",function(E){var D=s.getElementById(p.id+"_html5");D&&!D.disabled&&D.click();E.preventDefault()},p.id)}});d.bind("PostInit",function(){var p=s.getElementById(d.settings.drop_element);if(p)if(k)m.addEvent(p,"dragenter",function(){var t,v;t=s.getElementById(d.id+"_drop");if(!t){t=
s.createElement("input");t.setAttribute("type","file");t.setAttribute("id",d.id+"_drop");t.setAttribute("multiple","multiple");m.addEvent(t,"change",function(){r(this.files);m.removeEvent(t,"change",d.id);t.parentNode.removeChild(t)},d.id);p.appendChild(t)}m.getPos(p,s.getElementById(d.settings.container));v=m.getSize(p);m.getStyle(p,"position")==="static"&&m.extend(p.style,{position:"relative"});m.extend(t.style,{position:"absolute",display:"block",top:0,left:0,width:v.w+"px",height:v.h+"px",opacity:0})},
d.id);else{m.addEvent(p,"dragover",function(t){t.preventDefault()},d.id);m.addEvent(p,"drop",function(t){var v=t.dataTransfer;v&&v.files&&r(v.files);t.preventDefault()},d.id)}});d.bind("Refresh",function(p){var t,v,w;if(t=s.getElementById(d.settings.browse_button)){v=m.getPos(t,s.getElementById(p.settings.container));w=m.getSize(t);p=s.getElementById(d.id+"_html5_container");m.extend(p.style,{top:v.y+"px",left:v.x+"px",width:w.w+"px",height:w.h+"px"});if(d.features.triggerDialog){m.getStyle(t,"position")===
"static"&&m.extend(t.style,{position:"relative"});v=parseInt(m.getStyle(t,"z-index"),10);if(isNaN(v))v=0;m.extend(t.style,{zIndex:v});m.extend(p.style,{zIndex:v-1})}}});d.bind("DisableBrowse",function(p,t){var v=s.getElementById(p.id+"_html5");if(v)v.disabled=t});d.bind("CancelUpload",function(){o&&o.abort&&o.abort()});d.bind("UploadFile",function(p,t){function v(y,z,A){var B;if(File.prototype.slice)try{y.slice();return y.slice(z,A)}catch(C){return y.slice(z,A-z)}else return(B=File.prototype.webkitSlice||
File.prototype.mozSlice)?B.call(y,z,A):null}function w(y){function z(){function E(I){var R=0,O="----pluploadboundary"+m.guid(),N,M="";o=new XMLHttpRequest;if(o.upload)o.upload.onprogress=function(F){t.loaded=Math.min(t.size,B+F.loaded-R);p.trigger("UploadProgress",t)};o.onreadystatechange=function(){var F,K;if(o.readyState==4&&p.state!==m.STOPPED){try{F=o.status}catch(U){F=0}if(F>=400)p.trigger("Error",{code:m.HTTP_ERROR,message:m.translate("HTTP Error."),file:t,status:F});else{if(H){K={chunk:A,chunks:H,
response:o.responseText,status:F};p.trigger("ChunkUploaded",t,K);B+=L;if(K.cancelled){t.status=m.FAILED;return}t.loaded=Math.min(t.size,(A+1)*J)}else t.loaded=t.size;p.trigger("UploadProgress",t);I=D=N=M=null;if(!H||++A>=H){t.status=m.DONE;p.trigger("FileUploaded",t,{response:o.responseText,status:F})}else z()}}};if(p.settings.multipart&&q.multipart){G.name=t.target_name||t.name;o.open("post",Q,true);m.each(p.settings.headers,function(F,K){o.setRequestHeader(K,F)});if(typeof I!=="string"&&a.FormData){N=
new FormData;m.each(m.extend(G,p.settings.multipart_params),function(F,K){N.append(K,F)});N.append(p.settings.file_data_name,I);o.send(N);return}if(typeof I==="string"){o.setRequestHeader("Content-Type","multipart/form-data; boundary="+O);m.each(m.extend(G,p.settings.multipart_params),function(F,K){M+="--"+O+'\r\nContent-Disposition: form-data; name="'+K+'"\r\n\r\n';M+=unescape(encodeURIComponent(F))+"\r\n"});S=m.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";
M+="--"+O+'\r\nContent-Disposition: form-data; name="'+p.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(t.name))+'"\r\nContent-Type: '+S+"\r\n\r\n"+I+"\r\n--"+O+"--\r\n";R=M.length-I.length;I=M;if(o.sendAsBinary)o.sendAsBinary(I);else if(q.canSendBinary){for(var T=new Uint8Array(I.length),P=0;P<I.length;P++)T[P]=I.charCodeAt(P)&255;o.send(T.buffer)}return}}Q=m.buildUrl(p.settings.url,m.extend(G,p.settings.multipart_params));o.open("post",Q,true);o.setRequestHeader("Content-Type",
"application/octet-stream");m.each(p.settings.headers,function(F,K){o.setRequestHeader(K,F)});o.send(I)}var D,H,G,J,L,S,Q=p.settings.url;if(!(t.status==m.DONE||t.status==m.FAILED||p.state==m.STOPPED)){G={name:t.target_name||t.name};if(u.chunk_size&&t.size>u.chunk_size&&(q.chunks||typeof y=="string")){J=u.chunk_size;H=Math.ceil(t.size/J);L=Math.min(J,t.size-A*J);D=typeof y=="string"?y.substring(A*J,A*J+L):v(y,A*J,A*J+L);G.chunk=A;G.chunks=H}else{L=t.size;D=y}if(p.settings.multipart&&q.multipart&&typeof D!==
"string"&&C&&q.cantSendBlobInFormData&&q.chunks&&p.settings.chunk_size){C.onload=function(){E(C.result)};C.readAsBinaryString(D)}else E(D)}}var A=0,B=0,C="FileReader"in a?new FileReader:null;z()}var u=p.settings,x;x=g[t.id];if(q.jpgresize&&p.settings.resize&&/\.(png|jpg|jpeg)$/i.test(t.name))f.call(p,t,p.settings.resize,/\.png$/i.test(t.name)?"image/png":"image/jpeg",function(y){if(y.success){t.size=y.data.length;w(y.data)}else q.chunks?w(x):e(x,w)});else!q.chunks&&q.jpgresize?e(x,w):w(x)});d.bind("Destroy",
function(p){var t,v,w=s.body,u={inputContainer:p.id+"_html5_container",inputFile:p.id+"_html5",browseButton:p.settings.browse_button,dropElm:p.settings.drop_element};for(t in u)(v=s.getElementById(u[t]))&&m.removeAllEvents(v,p.id);m.removeAllEvents(s.body,p.id);if(p.settings.container)w=s.getElementById(p.settings.container);w.removeChild(s.getElementById(u.inputContainer))});b({success:true})}else b({success:false})}})})(window,document,plupload);
(function(a){var s=function(j,c){var e=a.extend({},m.defaults,c||{});a.telligent.evolution.get({url:e.endpoint,data:{url:j,maxImageWidth:typeof c.maxImageWidth!=="undefined"?c.maxImageWidth:e.maxImageWidth,maxImageHeight:typeof c.maxImageHeight!=="undefined"?c.maxImageHeight:e.maxImageHeight},success:function(f){if(f&&e.success&&typeof f!=="undefined"&&f!==null)e.success(f);else e.error&&e.error(f)},error:function(f,h,l){e.error&&e.error(f,h,l)}})},m={load:function(j,c){s(j,c)},render:function(j,
c){if(!(j===null||typeof j==="undefined"||typeof j.url==="undefined"||j.url.length===0||typeof j.title==="undefined"||j.title.length===0)){var e=a.extend({},m.defaults,c);return a.telligent.evolution.template.compile(e.template)(j)}}};m.defaults={endpoint:"",maxImageWidth:90,maxImageHeight:90,template:'<div class="abbreviated-post-header shared-link"></div><div class="abbreviated-post shared-link <% if(imageUrl !== null && imageUrl.length > 0){ %> with-image <% } %>">   <h4 class="post-name"><a href="<%: url %>" class="external-link" target="_new" rel="nofollow"><%= title %></a></h4>   <% if(siteName !== null && siteName.length > 0){ %>       <div class="post-application">           <span class="label"></span>           <span class="value"><a href="<%: url %>" class="external-link" target="_new" rel="nofollow"><%= siteName %></a></span>       </div>   <% } %>   <% if(imageUrl !== null && imageUrl.length > 0){ %>       <div class="post-thumbnail">           <a href="<%: url %>" class="external-link" target="_new" rel="nofollow"><%= resizedImageHtml %></a>       </div>   <% } %>   <% if(excerpt !== null && excerpt.length > 0){ %>       <div class="post-summary">           <%= excerpt %>      </div>   <% } %></div><div class="abbreviated-post-footer shared-link"></div>'};
if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.preview=m})(jQuery);(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.regex={encode:function(s){if(!s)return s;return s.replace(/[\-\[\]\{\}\(\)\*\+\?\.\,\\\^\$\|\#\s]/g,"\\$&")}}})(jQuery,window);
(function(a){var s=null,m=function(c){c.area.css({height:"auto"}).css({height:c.area.prop("scrollHeight")-(s===null?c.offset:s)});var e=c.area.outerHeight();if(e!==c.oldHeight){e>=c.maxHeight?c.area.css({overflow:"visible"}):c.area.css({overflow:"hidden"});c.area.trigger("evolutionResize",{newHeight:e,oldHeight:c.oldHeight});c.oldHeight=e}},j=function(c){return parseInt(c.replace("px",""),10)};a(function(){var c=a("<textarea>test</textarea>").css({overflow:"hidden",resize:"none",visible:"none"}).appendTo("body");
if(Math.abs(c.prop("scrollHeight")-c.height())<=1)s=0;c.remove()});a.fn.evolutionResize=function(){return this.filter("textarea").each(function(){var c=a(this).css({resize:"none",overflow:"hidden"}),e={area:c,oldHeight:c.height(),maxHeight:j(c.css("max-height")),offset:c.innerHeight()!==c.height()?j(c.css("padding-top"))+j(c.css("padding-bottom")):0};c.bind("input keydown keyup",function(){m(e)});m(e)})}})(jQuery);
(function(a){a.event.special.scrollend={setup:function(s){var m=false,j=a.extend({padding:150,delay:250},s);a(window).scroll(function(){m=true});setInterval(function(){if(m){m=false;checkPosition()}},j.delay);checkPosition=function(){a(document).height()-a(document).scrollTop()-a(window).height()<=j.padding&&a(document).trigger("scrollend")}}}})(jQuery);
(function(a,s){var m=[],j=/MSIE 6/i.test(navigator.userAgent)?"gif":"png",c=function(o,p){return p%2==1?o.settings.imagesPathUrl+"star-right-on."+j:o.settings.imagesPathUrl+"star-left-on."+j},e=function(o,p){return p%2==1?o.settings.imagesPathUrl+"star-right-off."+j:o.settings.imagesPathUrl+"star-left-off."+j},f=function(o,p){var t;for(t=0;t<m.length;t++)if(m[t].src==p)return true;return false},h=function(o,p,t){return typeof o.settings.titles=="object"?o.settings.titles[p].replace("{0}",t):o.settings.titles?
o.settings.titles.replace("{0}",t):t},l=function(o){return typeof o.internal.value!=="undefined"?o.internal.value:o.settings.value},n=function(o,p){var t,v=o.settings.maxRating*2;p=p*2-1;for(t=0;t<v;t++)t<=p?a(o.internal.state.find("img").get(t)).attr("src",c(o,t)):a(o.internal.state.find("img").get(t)).attr("src",e(o,t))},g=function(o,p){if(!(!o.internal.isInitialized||o.settings.isReadOnly)){o.internal.state.addClass(o.settings.overClass);n(o,p)}},k=function(o,p){if(!(!o.internal.isInitialized||
o.settings.isReadOnly)){o.internal.state.removeClass(o.settings.overClass);n(o,p)}},d=function(o){return this.each(function(){var p={settings:a.extend({},a.fn.evolutionStarRating.defaults,o||{}),internal:{state:a(this)}};if(!p.settings.imagesPathUrl)p.settings.imagesPathUrl=a.telligent.evolution.site.getBaseUrl()+"utility/images/";var t,v,w;for(w=0;w<2;w++){v=c(p,w);if(!f(v)){t=new Image;t.src=v;m[m.length]=t}v=e(p,w);if(!f(v)){t=new Image;t.src=v;m[m.length]=t}}a(this).data("evolutionStarRating_context",
p);b(p)})},b=function(o){o.internal.state.addClass(o.settings.starClass).css("white-space","nowrap").find("a").unbind(".evolutionStarRating").empty().end().bind("mouseleave",function(){n(o,l(o))});o.settings.isReadOnly&&o.internal.state.addClass(o.settings.readOnlyClass);var p,t=o.settings.maxRating*2,v=typeof o.settings.ratingCount==="undefined";for(p=0;p<t;p++)(function(){var w,u;u=a("<img />").css({borderLeftWidth:"0px",borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px"});o.settings.isReadOnly||
(w=a('<a href="#" />').css({textDecoration:"none"}).append(u));var x=(p+1)/2;x<=o.settings.value?u.attr("src",c(o,p)):u.attr("src",e(o,p));if(!o.settings.isReadOnly){if(o.settings.useHalfStars)y=h(o,p,x);else{x=Math.ceil(x);var y=h(o,x,x)}v&&w.attr("title",y);u.attr("alt",y);w.data("rating-value",x).bind("click.evolutionStarRating",function(){var z=w.data("rating-value");if(!(!o.internal.isInitialized||o.settings.isReadOnly)){o.internal.value=z;if(!o.settings.allowMultipleSelections)o.settings.isReadOnly=
true;o.internal.savingValue=true;o.settings.onRate(z)}return false}).bind("focus.evolutionStarRating",function(){g(o,w.data("rating-value"))}).bind("mouseover.evolutionStarRating",function(){g(o,w.data("rating-value"))}).bind("blur.evolutionStarRating",function(){k(o,w.data("rating-value"))}).bind("mouseout.evolutionStarRating",function(){k(o,w.data("rating-value"))})}u.attr("align","absmiddle").attr("border",0);w?o.internal.state.append(w):o.internal.state.append(u)})();r(o);o.internal.isInitialized=
true},r=function(o){o.settings.ratingMessageFormat&&!isNaN(parseInt(o.settings.ratingCount))&&!isNaN(parseInt(o.settings.value))&&o.internal.state.attr("title",o.settings.ratingMessageFormat.replace(/\{rating\}/gi,Math.round(o.settings.value*10)/10).replace(/\{count\}/gi,o.settings.ratingCount))},q={val:function(o){var p=this.data("evolutionStarRating_context");if(p!==null)if(typeof o!=="undefined"){p.internal.value=o;n(p,o);return o}else return l(p);return 0},readOnly:function(o){var p=this.data("evolutionStarRating_context");
if(p!==null)if(typeof o!=="undefined")(p.settings.isReadOnly=o)?p.internal.state.find("a").css({cursor:"default"}):p.internal.state.find("a").css({cursor:"pointer"});else return p.settings.isReadOnly;return true},option:function(o,p){if(typeof o==="object")return this.each(function(){var v=a(this).data("evolutionStarRating_context");if(v!=null){v.settings=a.extend({},v.settings,o);d.apply(a(this),[v.settings])}});else if(typeof o!=="undefined"&&typeof p!=="undefined")return this.each(function(){var v=
a(this).data("evolutionStarRating_context");if(v!=null){v.settings[o]=p;d.apply(a(this),[v.settings])}});else if(typeof o!=="undefined"){var t=this.data("evolutionStarRating_context");return t!==null?t.settings[o]:null}}};a.fn.evolutionStarRating=function(o){if(o in q)return q[o].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof o==="object"||!o)return d.apply(this,arguments);else a.error("Method "+o+" does not exist on jQuery.fn.evolutionStarRating")};a.extend(a.fn.evolutionStarRating,
{defaults:{value:0,maxRating:5,imagesPathUrl:"",useHalfStars:false,starClass:"rating",overClass:"active",readOnlyClass:"readonly",titles:["Terrible","Poor","Fair","Average","Good","Excellent"],isReadOnly:false,allowMultipleSelections:true,ratingCount:s,ratingMessageFormat:"Average rating: {rating} out of {count} ratings.",onRate:function(){}}})})(jQuery,undefined);
(function(a){var s={openTagSelector:function(){var l=this.data("evolutionTagTextBox");if(l){window.__tagEditor={SetSelectedTags:function(g){for(var k=[],d=j(l),b=l.settings.allTags,r,q=0;q<d.length;q++){r=false;for(var o=0;o<b.length;o++)if(d[q].toUpperCase()==b[o].toUpperCase()){r=true;break}r||(k[k.length]=d[q])}for(q=0;q<g.length;q++)k[k.length]=g[q];a(l.internal.state).val(k.join(", "))},GetAllTagsWithEncoding:function(){for(var g=[],k=l.settings.allTags,d=a("<div></div>"),b=0;b<k.length;b++){d.text(k[b]);
g[b]=[k[b],d.html()]}return g},GetSelectedTags:function(){return j(l)}};var n=l.settings.selectTagsModalUrl;if(n.substr(0,2)=="~/")n=a.telligent.evolution.site.getBaseUrl()+n.substr(2);if(window.Telligent_Modal)window.Telligent_Modal.Open(n,400,350,null);else a.glowModal&&a.glowModal(n,{width:400,height:350})}}},m=function(l){return this.each(function(){var n={settings:a.extend({},a.fn.evolutionTagTextBox.defaults,l||{}),internal:{state:this,suggestionTimeoutHandle:null,previousTags:[],previousValue:"",
currentTag:"",currentTagPosition:0}};a(this).data("evolutionTagTextBox",n);h(n);a(this).bind("keyup.evolutionTagTextBox",function(g){return e(n,g)});a(this).bind("keydown.evolutionTagTextBox",function(g){return c(n,g)});a(this).bind("onblur.evolutionTagTextBox",function(){window.clearTimeout(n.internal.suggestionTimeoutHandle);return true})})},j=function(l){l=a(l.internal.state).val().split(/;|,/);for(var n=[],g=0;g<l.length;g++){l[g]=l[g].replace(/^\s+|\s+$/g,"");if(l[g]!="")n[n.length]=l[g]}return n},
c=function(l,n){window.clearTimeout(l.internal.suggestionTimeoutHandle);if(!n)n=window.event;if(n){if(n.keyCode==13){l.internal.state.focus();if(document.selection){var g=window.document.selection.createRange();if(g.text&&g.text.length>0){g.moveStart("character",g.text.length);g.select()}}else if(l.internal.state.selectionStart||l.internal.state.selectionStart=="0")l.internal.state.selectionStart=l.internal.state.selectionEnd;n.cancelBubble=true;return n.returnValue=false}else if(n.keyCode==8){l.internal.state.focus();
if(document.selection){if(g=window.document.selection.createRange()){g.moveStart("character",-1);g.text="";n.cancelBubble=true;return n.returnValue=false}}else if(l.internal.state.selectionStart||l.internal.state.selectionStart=="0"){g=l.internal.state.selectionStart;var k=l.internal.state.selectionEnd;if(g==k)return true;g>0&&g--;l.internal.state.value=l.internal.state.value.substring(0,g)+l.internal.state.value.substring(k);l.internal.state.selectionStart=g;l.internal.state.selectionEnd=g;n.cancelBubble=
true;return n.returnValue=false}}return true}},e=function(l){window.clearTimeout(l.internal.suggestionTimeoutHandle);l.internal.suggestionTimeoutHandle=window.setTimeout(function(){f(l)},249);return true},f=function(l){if(!document.selection&&!l.internal.state.selectionStart&&l.internal.state.selectionStart!="0")return true;if(a(l.internal.state).val()==l.internal.previousValue)return true;l.internal.previousValue=a(l.internal.state).val();h(l);if(l.internal.currentTag=="")return true;var n;a:{n=
l.internal.currentTag;var g,k,d,b=l.settings.allTags;for(g=0;g<b.length;g++)if(b[g].toLowerCase().indexOf(n)==0){d=false;for(k=0;k<l.internal.previousTags.length&&!d;k++)if(l.internal.previousTags[k]==b[g].toLowerCase())d=true;if(!d){n=b[g];break a}}n=null}if(!n||n.length==l.internal.currentTag.length)return true;n=n.substr(l.internal.currentTag.length);a(l.internal.state).val(a(l.internal.state).val().substr(0,l.internal.currentTagPosition+l.internal.currentTag.length)+n+a(l.internal.state).val().substr(l.internal.currentTagPosition+
l.internal.currentTag.length));l.internal.state.focus();if(document.selection){g=l.internal.state.createTextRange();g.select();g.moveStart("character",l.internal.currentTagPosition+l.internal.currentTag.length);g.moveEnd("character",-(a(l.internal.state).val().length-(l.internal.currentTagPosition+l.internal.currentTag.length+n.length)));g.select()}else if(l.internal.state.selectionStart||l.internal.state.selectionStart=="0"){l.internal.state.selectionStart=l.internal.currentTagPosition+l.internal.currentTag.length;
l.internal.state.selectionEnd=l.internal.currentTagPosition+l.internal.currentTag.length+n.length}},h=function(l){var n=a(l.internal.state).val().toLowerCase().split(/;|,/),g,k,d;l.internal.currentTag="";var b=0,r=true;for(g=0;g<n.length;g++){k=n[g].replace(/^\s+/g,"");b+=n[g].length-k.length;n[g]=k;d=false;for(k=0;k<l.internal.previousTags.length&&!d;k++)if(n[g]==l.internal.previousTags[k]){l.internal.previousTags.splice(k,1);d=true}if(!d)if(l.internal.currentTag!="")r=false;else{l.internal.currentTag=
n[g];l.internal.currentTagPosition=b}b+=n[g].length+1}if(!r)l.internal.currentTag="";l.internal.previousTags=n};a.fn.evolutionTagTextBox=function(l){if(l in s)return s[l].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof l==="object"||!l)return m.apply(this,arguments);else a.error("Method "+l+" does not exist on jQuery.fn.evolutionTagTextBox")};a.extend(a.fn.evolutionTagTextBox,{defaults:{allTags:[],selectTagsModalUrl:"~/utility/TagSelector.aspx?TagEditor=__tagEditor"}})})(jQuery);
(function(a){var s={},m={open:"<%",close:"%>"},j=function(e,f){var h=a.extend({},m,f||{}),l=RegExp("\\"+h.open+"=([\\s\\S]+?)"+h.close,"g"),n=RegExp("\\"+h.open+":([\\s\\S]+?)"+h.close,"g");h=RegExp("\\"+h.open+"(.*?)"+h.close,"g");l=" var source = [];  with(data){with(extraHelpers){with(defaultHelpers){  source.push('"+e.replace(/[\r\n]/g,"").replace(l,"'); source.push(String($1)); source.push('").replace(n,"'); source.push(escape(String($1))); source.push('").replace(h,"'); $1 source.push('")+"');  }}}  return source.join('');";
n=new Function("defaultHelpers","extraHelpers","data",l);n.compiledSource="function(defaultHelpers, extraHelpers, data) { "+l+" } ";return n},c={compile:function(e,f,h){var l=s[e];if(typeof l==="undefined"){var n=document.getElementById(e)!==null?document.getElementById(e).innerHTML:e,g=j(n,h);s[e]=l=function(k){return g.call(this,c.helpers||{},f||{},k||{})};l.source={raw:n,compiled:g.compiledSource}}return l},helpers:{foreach:function(e,f){if(e&&e.length>0&&f)for(var h=0;h<e.length;h++)f(e[h],h)},
escape:function(){var e=/&/g,f=/</g,h=/>/g,l=/\"/g;return function(n){return n.replace(e,"&amp;").replace(f,"&lt;").replace(h,"&gt;").replace(l,"&quot;")}}()}};a.telligent=a.telligent||{};a.telligent.evolution=a.telligent.evolution||{};a.telligent.evolution.template=c})(jQuery);
(function(a){var s={show:function(m){var j=a.extend({},s.defaults,m||{}),c=a('<div class="theater-mask"></div>').hide().appendTo("body"),e=a('<div class="theater-container"></div>').hide().appendTo("body");m=a('<div class="theater-content-container"></div>').appendTo(e);var f=a('<div class="theater-content"></div>').appendTo(m),h=a('<a href="#" class="theater-next">&rarr;</a>').appendTo(e),l=a('<a href="#" class="theater-back">&larr;</a>').appendTo(e),n=a('<a href="#" class="theater-close">X</a>').appendTo(m),
g=null,k=null,d=null,b=function(q,o){a("body").css({overflow:"hidden"});g=q;q(function(p){h.hide();l.hide();o?o(f,p):f.hide().html(p);if(!c.is(":visible")){c.show();e.show()}j.loaded(f);k=j.nextContent(f);d=j.previousContent(f);f.show();k&&k!==null&&h.show();d&&d!==null&&l.show()})},r=function(){a("body").css({overflow:"auto"});h.unbind("_evolution_theater");l.unbind("_evolution_theater");n.unbind("_evolution_theater");e.unbind("_evolution_theater");c.hide().remove();e.hide().remove();a(document).unbind("_evolution_theater")};
s.refresh=function(q){b(g,q)};s.hide=function(){r()};h.bind("click._evolution_theater",function(q){q.preventDefault();k&&k!==null&&b(k)});l.bind("click._evolution_theater",function(q){q.preventDefault();d&&d!==null&&b(d)});n.bind("click._evolution_theater",function(q){q.preventDefault();r()});e.bind("click._evolution_theater",function(q){q.target===e.get(0)&&r()});a(document).bind("keydown._evolution_theater",function(q){if(c.is(":visible"))if(q.which===39){if(!a(q.target).is("input,textarea")){k&&
k!==null&&b(k);h.addClass("pressed")}}else if(q.which===37){if(!a(q.target).is("input,textarea")){d&&d!==null&&b(d);l.addClass("pressed")}}else q.which===27&&r()});a(document).bind("keyup._evolution_theater",function(q){if(c.is(":visible"))if(q.which===39)h.removeClass("pressed");else q.which===37&&l.removeClass("pressed")});b(j.content)},hide:function(){},refresh:function(){},defaults:{content:function(){return null},nextContent:function(){return null},previousContent:function(){return null},loaded:function(){}}};
a.evolutionTheater=s})(jQuery);
(function(a){var s={val:function(c){if(c===undefined){var e=this.data("evolutionToggleLink");if(e)return e.settings.val;return false}else return this.each(function(){var f=a(this).data("evolutionToggleLink");if(f){f.settings.val=c;f.internal.processing=false;j(f)}})}},m=function(c){return this.each(function(){var e={settings:a.extend({},a.fn.evolutionToggleLink.defaults,c||{}),internal:{state:a(this),processing:false}};e.internal.state.data("evolutionToggleLink",e).click(function(){if(!e.internal.processing&&e.settings.changeState){e.internal.processing=
true;j(e);e.settings.changeState(!e.settings.val)}return false});j(e)})},j=function(c){if(c.internal.processing)c.internal.state.attr("class",c.settings.processingCssClass).attr("title",c.settings.processingTitle).html(c.settings.processingHtml);else c.settings.val?c.internal.state.attr("class",c.settings.onCssClass).attr("title",c.settings.onTitle).html(c.settings.onHtml):c.internal.state.attr("class",c.settings.offCssClass).attr("title",c.settings.offTitle).html(c.settings.offHtml)};a.fn.evolutionToggleLink=
function(c){if(c in s)return s[c].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof c==="object"||!c)return m.apply(this,arguments);else a.error("Method "+c+" does not exist on jQuery.fn.evolutionToggleLink")};a.extend(a.fn.evolutionToggleLink,{defaults:{onHtml:"",offHtml:"",processingHtml:"",changeState:null,onCssClass:"",offCssClass:"",processingCssClass:"",onTitle:"",offTitle:"",processingTitle:"",val:false}})})(jQuery);
(function(a){var s={};parseData=function(m){m=m.get(0);var j={};a.each(m.attributes,function(c,e){if(e.name.indexOf("data-")===0){var f=e.name.substring(5);j[f]=f==="configuration"?a.telligent.evolution.url.parseQuery(e.value):e.value}});return j};api={components:{},render:function(m){var j=a(m||document);a.each(api.components,function(c,e){var f=a(".ui-"+c,j);j.hasClass(".ui-"+c)&&f.add(j);if(f&&f.length>0&&typeof e.setup!=="undefined"&&!s[c]){e.setup.call(this);s[c]=true}f&&f.length>0&&typeof e.add!==
"undefined"&&f.each(function(){var h=a(this);if(!h.data("_telligent_evolution_ui_render_add")){e.add.call(h,h,api.data(h));h.data("_telligent_evolution_ui_render_add",true)}})})},data:function(m){if(!m)return{};m=a(m);var j=m.data("_telligent_evolution_ui_data");if(j===null||typeof j==="undefined"){j=parseData(m);m.data("_telligent_evolution_ui_data",j)}return j}};if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.ui=api})(jQuery);
(function(a){var s=function(m,j){return function(){try{j.before&&j.before.apply(this,arguments)}catch(c){}var e=m.apply(this,arguments);try{j.after&&j.after.apply(this,arguments)}catch(f){}return e}};a.each(["html","append","prepend"],function(m,j){a.fn[j]=s(a.fn[j],{after:function(){a.telligent.evolution.ui.render(this)}})});a.each(["appendTo","prependTo"],function(m,j){a.fn[j]=s(a.fn[j],{after:function(c){a.telligent.evolution.ui.render(a(c))}})});a.each(["after","before"],function(m,j){a.fn[j]=
s(a.fn[j],{after:function(){a.telligent.evolution.ui.render(this.parent())}})});a.each(["insertAfter","insertBefore"],function(m,j){a.fn[j]=s(a.fn[j],{after:function(c){a.telligent.evolution.ui.render(a(c).parent())}})})})(jQuery);jQuery(function(a){a.telligent.evolution.ui.render()});
(function(a){var s=function(m,j,c,e){a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:m,ContentTypeId:j,TypeId:c,SortBy:"Date",SortOrder:"Descending",PageSize:1,PageIndex:0},cache:false,dataType:"json",success:function(f){e.call(this,{count:f.TotalCount,latestLike:f.Likes.length>0?f.Likes[0]:null})}})};a.telligent.evolution.ui.components.like={setup:function(){a.fn.evolutionLike.delegatePopups({containerSelector:".content-fragment",delegatedSelector:".ui-like",
onList:function(m,j,c,e,f,h){a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:m,ContentTypeId:j,TypeId:c,SortBy:"Date",SortOrder:"Descending",PageSize:f||20,PageIndex:h||0},cache:false,dataType:"json",success:function(l){e({likers:a.map(l.Likes,function(n){return{displayName:n.User.DisplayName,profileUrl:n.User.ProfileUrl,avatarUrl:n.User.AvatarUrl}}),hasMorePages:(l.PageIndex+1)*l.PageSize<l.TotalCount})}})},onOptions:function(m){m=a.telligent.evolution.ui.data(m);
return{contentId:m.contentid,contentTypeId:m.contenttypeid,typeId:m.configuration.LikeTypeId}},likersTemplate:' <% foreach(likers, function(liker) { %>      <li class="content-item">          <div class="full-post-header"></div>          <div class="full-post">              <span class="avatar">                  <a href="<%: liker.profileUrl %>"  class="internal-link view-user-profile">                      <img src="<%: liker.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" />                  </a>              </span>              <span class="user-name">                  <a href="<%: liker.profileUrl %>" class="internal-link view-user-profile"><%= liker.displayName %></a>              </span>          </div>          <div class="full-post-footer"></div>      </li>  <% }); %> ',
likersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= likers %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> '})},add:function(m,j){var c=j.readonly==="true";a(m).evolutionLike({contentId:j.contentid,contentTypeId:j.contenttypeid,initialState:j.initialstate,initialMessage:j.initialmessage,initialCount:j.initialcount,
format:c?j.format.replace("{toggle}",""):j.format,typeId:j.configuration.LikeTypeId,onLike:function(e,f,h,l){var n={ContentId:e,ContentTypeId:f};if(h!==null&&h.length>0)n.TypeId=h;a.telligent.evolution.post({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:n,cache:false,dataType:"json",success:function(){s(e,f,h,l)}})},onUnlike:function(e,f,h,l){var n={ContentId:e};if(h!==null&&h.length>0)n.TypeId=h;a.telligent.evolution.del({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/like.json",
data:n,cache:false,dataType:"json",success:function(){s(e,f,h,l)}})}})}}})(jQuery);
(function(a){var s=function(m,j,c){a.telligent.evolution.post({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/abusereports.json",data:{ContentId:m,ContentTypeId:j},cache:false,dataType:"json",success:function(e){c(e)}})};a.telligent.evolution.ui.components.moderate={setup:function(){},add:function(m,j){m=a(m);var c={contentId:j.contentid,contentTypeId:j.contenttypeid,initialState:j.initialstate==="true",onReport:s};if(j.configuration&&j.configuration.AdditionalLinks)c.onGetAdditionalLinks=
function(e){e(a.parseJSON(j.configuration.AdditionalLinks))};else if(j.configuration&&j.configuration.AdditionalLinksUrl)c.onGetAdditionalLinks=function(e){a.telligent.evolution.get({url:j.configuration.AdditionalLinksUrl,cache:false,dataType:"json",success:function(f){e(f.links||[])}})};if(j.configuration&&j.configuration.LinkClassName)c.linkClassName=j.configuration.LinkClassName;m.evolutionModerate(c)}}})(jQuery);
(function(a){var s={};a.telligent.evolution.ui.components.page={setup:function(){},add:function(m,j){var c={currentPage:parseInt(j.currentpage,10),pageSize:parseInt(j.pagesize,10),totalItems:parseInt(j.totalitems,10),showPrevious:typeof j.configuration.ShowPrevious==="undefined"?false:j.configuration.ShowPrevious==="true",showNext:typeof j.configuration.ShowNext==="undefined"?false:j.configuration.ShowNext==="true",showFirst:typeof j.configuration.ShowFirst==="undefined"?true:j.configuration.ShowFirst===
"true",showLast:typeof j.configuration.ShowLast==="undefined"?true:j.configuration.ShowLast==="true",showIndividualPages:typeof j.configuration.ShowIndividualPages==="undefined"?true:j.configuration.ShowIndividualPages==="true",numberOfPagesToDisplay:typeof j.configuration.NumberOfPagesToDisplay==="undefined"?5:parseInt(j.configuration.NumberOfPagesToDisplay,10),pageKey:j.pagekey,hash:j.configuration.Target,baseUrl:j.configuration.BaseUrl||window.location.href,template:typeof j.configuration.Template!==
"undefined"?j.configuration.Template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false">              <span>&#171;</span>          </a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false">              <span>&#60;</span>          </a>      <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>">              <span><%= link.page %></span>          </a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false">              <span>&#62;</span>          </a>      <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false">              <span>&#187;</span>          </a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '};
if(j.pagedcontenturl){s[j.pagedcontentpagingevent]={onPage:function(e,f){var h={};h[j.pagekey]=e;h=a.telligent.evolution.url.modify({url:j.pagedcontenturl,query:h});a.telligent.evolution.get({url:h,cache:false,success:function(l){f(l)}})}};a.extend(c,{onPage:function(e,f){s[j.pagedcontentpagingevent].onPage(e,f)},pagedContentContainer:"#"+j.pagedcontentwrapperid,pagedContentPagingEvent:j.pagedcontentpagingevent,pagedContentPagedEvent:j.pagedcontentpagedevent,transition:j.configuration.Transition,
transitionDuration:typeof j.configuration.TransitionDuration==="undefined"?200:parseInt(j.configuration.TransitionDuration,10)})}a(m).evolutionPager(c)}}})(jQuery);
(function(a){a.telligent.evolution.ui.components.rate={setup:function(){},add:function(s,m){var j=a.extend({},{isReadOnly:m.readonly==="true",value:parseFloat(m.initialvalue),ratingCount:parseFloat(m.initialcount)});j.value*=a.fn.evolutionStarRating.defaults.maxRating;j.onRate=function(c){if(m.contentid&&m.contenttypeid){c/=a.fn.evolutionStarRating.defaults.maxRating;c={ContentId:m.contentid,ContentTypeId:m.contenttypeid,Value:c};if(m.ratingtypeid)c.TypeId=m.ratingtypeid;a.telligent.evolution.post({url:a.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/ratings.json",data:c,success:function(){var e={ContentId:m.contentid};if(m.ratingtypeid)e.TypeId=m.ratingtypeid;a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/rateditem.json",data:e,success:function(f){f&&f.RatedItem&&f.RatedItem.AverageValue?a(s).evolutionStarRating("option",{value:f.RatedItem.AverageValue*a.fn.evolutionStarRating.defaults.maxRating,ratingCount:f.RatedItem.Count}):a(s).evolutionStarRating("option",{value:0,ratingCount:0})}})}})}};
j.ratingCount==0&&j.isReadOnly||a(s).evolutionStarRating(j)}}})(jQuery);
(function(a){var s=a.telligent.evolution.template.compile('<% foreach(properties, function(property) { %> <li class="property-item"><%= property %></li> <% }); %> '),m=function(j,c){a.telligent.evolution.get({url:j,dataType:"json",success:function(e){e&&c(s(e))}})};a.telligent.evolution.ui.components.searchresult={setup:function(){},add:function(j,c){if(c.detailsurl){var e=null,f=j.find("ul.details"),h=f.html();j.bind("mouseenter",function(){e!==null?f.html(e):m(c.detailsurl,function(l){e=l;f.html(e)})}).bind("mouseleave",
function(){f.html(h)})}}}})(jQuery);
(function(a){var s=function(m,j,c){var e=a(c);e.html("");if(m){var f=true;a.each(m.split(/,/),function(h,l){var n=a.trim(l);if(n){if(f)f=false;else e.append(", ");j?e.append(a('<a rel="nofollow tag">').attr("href",j.replace(/{tag}/g,a.telligent.evolution.url.encodePathComponent(a.telligent.evolution.html.decode(n)))).text(n)):e.append(n)}})}};a.telligent.evolution.ui.components.tag={setup:function(){},add:function(m,j){var c=jQuery("<span></span>");a(m).append(c);s(j.tags,j.urlformat,c);var e=null;
if(j.readonly!=="true"){e=a('<a href="javascript:void(0);" class="internal-link edit-tags"></a>');a(m).append(e);e.evolutionInlineTagEditor({allTags:a.grep(j.selectabletags.split(","),function(f){return f}),currentTags:a.grep(j.tags.split(","),function(f){return f}),onSave:function(f,h){var l={Tags:f&&f.length>0?f.join(","):"",ContentId:j.contentid,ContentTypeId:j.contenttypeid};if(j.tagtypeid)l.TypeId=j.tagtypeid;a.telligent.evolution.put({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/contenttags.json",
data:l,success:function(){s(l.Tags,j.urlformat,c);h()}})}})}}}})(jQuery);
(function(a){var s=function(){return{add:function(h,l,n,g,k,d){h={ContentId:h,ContentTypeId:l,Body:g};if(typeof n!=="undefined"&&n!==null)h.CommentTypeId=n;a.telligent.evolution.post({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/comments.json",data:h,cache:false,success:k,error:d})},del:function(h,l,n){a.telligent.evolution.del({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/comments/{CommentId}.json",data:{CommentId:h},cache:false,success:l,error:n})}}}(),m=function(h,l){a.telligent.evolution.get({url:h,
cache:false,success:function(n){l(n)}})},j=function(h){var l=h.content.find(".content-item.action.likes");l.length>0&&a.telligent.evolution.messaging.subscribe("ui.like",function(n){if(n.contentId===h.contentId&&(typeof h.typeId==="undefined"||h.typeId===""||h.typeId==="00000000-0000-0000-0000-000000000000"||n.typeId===h.typeId))n.count>0?l.removeClass("without-likes").addClass("with-likes"):l.removeClass("with-likes").addClass("without-likes")})},c=function(h){h.content.find(".internal-link.comment").bind("click",
function(l){l.preventDefault();h.content.find(".comment-form").show().find("textarea").focus()});h.content.delegate(".comment-form textarea","focus",function(l){h.content.find(".comment-form").addClass("with-avatar");l=a(l.target);if(!l.data("theater_composer_inited")){l.data("theater_composer_inited",true);l.evolutionComposer({plugins:["mentions","hashtags"]});l.evolutionComposer("onkeydown",function(n){if(n.which===13){n=a(n.target).evolutionComposer("val");if(a.trim(n).length>0){h.content.find(".comment-form textarea").attr("disabled",
true).blur();s.add(h.contentId,h.contentTypeId,h.typeId,n,function(g){a.evolutionTheater.refresh(e);a.telligent.evolution.messaging.publish("activity.commentadded",g)},function(){h.content.find(".comment-form textarea").evolutionComposer("val","").trigger("keydown").trigger("keyup").removeAttr("disabled").closest(".comment-form").removeClass("with-avatar")})}}return true})}});h.content.delegate(".comment-form textarea","blur",function(){h.content.find(".comment-form").removeClass("with-avatar")})},
e=function(h,l){var n=a("<div></div>").html(l).find("ul.content-list.comments");h.find("ul.content-list.comments").replaceWith(n)},f=function(h){h.content.find(".content-item.comment").bind("evolutionModerateLinkClicked",function(){var l=a(this).data("commentid");s.del(l,function(n){a.evolutionTheater.refresh(e);a.telligent.evolution.messaging.publish("activity.commentremoved",n)},function(){})})};a.telligent.evolution.ui.components.theater={setup:function(){},add:function(h,l){h=a(h);h.bind("click",
function(n){n.preventDefault();a.evolutionTheater.show({content:function(g){m(l.theaterurl,g)},nextContent:function(g){var k=g.find("a[data-nexttheaterurl]").data("nexttheaterurl");if(k&&k.length>0)return function(d){m(k,d)}},previousContent:function(g){var k=g.find("a[data-previoustheaterurl]").data("previoustheaterurl");if(k&&k.length>0)return function(d){m(k,d)}},loaded:function(g){var k=g;k=a(k);g=k.find(".activity-story");k={content:k,story:g};g!==null&&a.extend(k,{contentId:g.data("contentid"),
contentTypeId:g.data("contenttypeid"),typeId:g.data("typeid")});j(k);c(k);f(k)}})})}}})(jQuery);
(function(a){a.telligent.evolution.ui.components.webpreview={setup:function(){},add:function(s,m){var j={url:m.configuration.url,success:function(c){if(c){c=a.telligent.evolution.preview.render(c,{template:a.telligent.evolution.preview.defaults.template});typeof c!=="undefined"&&c!==null&&c.length>0&&s.replaceWith(c)}}};if(typeof m.configuration.maximagewidth!=="undefined")j.maxImageWidth=m.configuration.maximagewidth;if(typeof m.configuration.maximageheight!=="undefined")j.maxImageHeight=m.configuration.maximageheight;
a.telligent.evolution.preview.load(j.url,{maxImageWidth:j.maxImageWidth,maxImageHeight:j.maxImageHeight,success:j.success})}}})(jQuery);
(function(a,s){var m=function(e,f,h,l,n){if(!e)return e;var g=/(?:\.config|\.ascx|\.asax|\.cs|\.vb)$/i.test(e);return e.replace(f,function(k,d,b){if(k==" ")return h;else if(k=="."&&!g&&b!=e.length-1&&e.substr(b+1,1)!=".")return l;else{d=[];d[d.length]=n;for(b=0;b<k.length;b++){var r=k.charCodeAt(b).toString(16)+"",q=r.length;if(q==4){d[d.length]=r.substr(2,2).toUpperCase();d[d.length]=r.substr(0,2).toUpperCase()}else if(q==2){d[d.length]=r.toUpperCase();d[d.length]="00"}}d[d.length]=n;return d.join("")}})},
j=function(e,f,h,l){if(!e)return e;return e.replace(f,function(n){if(n.length==1)if(n==h)return" ";else{if(n==l)return"."}else{n=n.substr(1,n.length-2);if(n.length%4!=0)return"";for(var g=[],k=0;k<n.length;k+=4)g[g.length]=String.fromCharCode(parseInt(n.substr(k+2,2)+n.substr(k,2),16));return g.join("")}})},c={parseQuery:function(e){var f=e.split("?"),h={};e=(f.length>1?f[1]:e).split("#")[0].split("&");a.each(e,function(l,n){n=n.split("=");if(n.length===2)h[n[0]]=decodeURIComponent(n[1].replace(/\+/gi,
" "))});return h},serializeQuery:function(e){e=e||{};var f=[];a.each(e,function(h,l){f[f.length]=encodeURIComponent(h)+"="+encodeURIComponent(l)});return f.join("&")},modify:function(e){e=a.extend({url:s.location.href,query:null,hash:s.location.hash,protocol:s.location.protocol},e);var f=[e.url.split("?")[0].split("#")[0]],h;if(typeof e.query==="string")e.query=c.parseQuery(e.query);if((h=c.serializeQuery(a.extend(c.parseQuery(e.url),e.query)))&&h.length>0)f[f.length]="?"+h;if(e.hash&&e.hash.length>
0)f[f.length]=(e.hash.indexOf("#")!==0?"#":"")+e.hash;return f.join("")},hashData:function(e,f){if(typeof e==="undefined"){e={};var h=s.location.href.split("#"),l="";if(h.length>2){a.each(h,function(n,g){if(n>0){if(n>1)l+="#";l+=g}});h=[h[0],l]}if(h.length===2)e=c.parseQuery(h[1]);return e}else{f||(e=a.extend(c.hashData(),e));s.location.href=s.location.href.split("#")[0]+"#"+c.serializeQuery(e)}},encode:function(e){return encodeURIComponent(e)},decode:function(e){return decodeURIComponent(e)},encodePathComponent:function(e){return m(e,
/([^A-Za-z0-9 \.]+|\.| )/g,"+","-","_")},decodePathComponent:function(e){return j(e,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|\-|\+)/ig,"+","-")},encodeFileComponent:function(e){return m(e,/([^A-Za-z0-9 \.]+|\.| )/g,"-",".","_")},decodeFileComponent:function(e){return j(e,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|_|\-)/ig,"-",".")}};if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.url=c})(jQuery,window);
(function(a){var s={},m=function(e){return this.each(function(){var f={settings:a.extend({},a.fn.evolutionUserFileTextBox.defaults,e||{}),internal:{state:this,preview:null,select:null,remove:null}},h=a("<div></div>").attr("class",f.settings.cssClass);f.internal.preview=a("<div></div>").attr("class",f.settings.previewCssClass);h.append(f.internal.preview);f.internal.select=a('<input type="button" />').val(f.settings.selectText).click(function(){j(f);return false});h.append(f.internal.select);f.internal.remove=
a('<input type="button" />').val(f.settings.removeText).click(function(){f.internal.preview.html(f.settings.noFileText);a(f.internal.state).val("");return false});h.append(f.internal.remove);a(this).val()?f.internal.preview.html(f.settings.initialPreviewHtml):f.internal.preview.html(f.settings.noFileText);a(this).data("evolutionUserFileTextBox",f).before(h).hide()})},j=function(e){var f=e.settings.userFilesBrowseModalUrl;if(f.substr(0,2)=="~/")f=a.telligent.evolution.site.getBaseUrl()+f.substr(2);
if(window.Telligent_Modal)window.Telligent_Modal.Open(f,620,450,function(h){c(e,h)});else a.glowModal&&a.glowModal(f,{width:620,height:450,onClose:function(h){c(e,h)}})},c=function(e,f){if(f&&f.length==3&&f[0]&&f[1]){e.internal.preview.html(f[2]);a(e.internal.state).val(f[1])}};a.fn.evolutionUserFileTextBox=function(e){if(e in s)return s[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return m.apply(this,arguments);else a.error("Method "+e+" does not exist on jQuery.fn.evolutionUserFileTextBox")};
a.extend(a.fn.evolutionUserFileTextBox,{defaults:{removeText:"",selectText:"",noFileText:"",initialPreviewHtml:"",cssClass:"user-file-url",previewCssClass:"user-file-url-preview",userFilesBrowseModalUrl:"~/utility/userfilesbrowse.aspx"}})})(jQuery);
(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.validation={registerExtensions:function(s){if(a.validator){a.validator.addMethod("password",function(m,j){return this.optional(j)||m.match(s.passwordRegex)},s.passwordInvalidMessage);a.validator.addMethod("email",function(m,j){return this.optional(j)||m.match(RegExp(s.emailRegex))},s.emailInvalidMessage);a.validator.addMethod("url",function(m,j){if(this.optional(j))return true;if(m.match(s.urlRegex))return true;
if(("http://"+m).match(s.urlRegex)){a(j).val("http://"+m);return true}return false},s.urlInvalidMessage);a.validator.addMethod("emails",function(m,j){for(var c=m.split(/[;,]/),e=true,f=RegExp(s.emailRegex),h=0;h<c.length;h++)jQuery.trim(c[h]).match(f)||(e=false);return this.optional(j)||e},s.emailsInvalidMessage);a.validator.addMethod("username",function(m,j){return this.optional(j)||m.match(s.usernameRegex)},s.usernameInvalidMessage);a.validator.addMethod("usernameexists",function(m,j,c){if(this.optional(j))return"dependency-mismatch";
var e=this.previousValue(j);this.settings.messages[j.name]||(this.settings.messages[j.name]={});e.originalMessage=this.settings.messages[j.name].remote;this.settings.messages[j.name].remote=e.message;c=typeof c=="string"&&{url:c}||c;var f=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsUsernameAvailable";if(c.url)f=c.url;if(e.old!==m){e.old=m;var h=this;this.startRequest(j);var l='{"username":"'+m+'","elementName":"'+j.name+'"}';a.telligent.evolution.post({url:f,
dataType:"json",contentType:"application/json; charset=utf-8",data:l,success:function(n){j=h.findByName(n.d.ElementName)[0];h.settings.messages[j.name].remote=e.originalMessage;var g=n.d.IsValid===true;if(g){var k=h.formSubmitted;h.prepareElement(j);h.formSubmitted=k;h.successList.push(j);h.showErrors()}else{k={};n=e.message=n.d.ErrorMessage||h.defaultMessage(j,"usernameexists");k[j.name]=a.isFunction(n)?l(m):n;h.showErrors(k)}e.valid=g;h.stopRequest(j,g)}});return"pending"}else if(this.pending[j.name])return"pending";
return e.valid},undefined);a.validator.addMethod("emailexists",function(m,j,c){if(this.optional(j))return"dependency-mismatch";var e=this.previousValue(j);this.settings.messages[j.name]||(this.settings.messages[j.name]={});e.originalMessage=this.settings.messages[j.name].remote;this.settings.messages[j.name].remote=e.message;c=typeof c=="string"&&{url:c}||c;var f=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsEmailAvailable";if(c.url)f=c.url;if(e.old!==m){e.old=
m;var h=this;this.startRequest(j);var l='{"email":"'+m+'","elementName":"'+j.name+'"}';a.telligent.evolution.post({url:f,dataType:"json",contentType:"application/json; charset=utf-8",data:l,success:function(n){j=h.findByName(n.d.ElementName)[0];h.settings.messages[j.name].remote=e.originalMessage;var g=n.d.IsValid===true;if(g){var k=h.formSubmitted;h.prepareElement(j);h.formSubmitted=k;h.successList.push(j);h.showErrors()}else{k={};n=e.message=n.d.ErrorMessage||h.defaultMessage(j,"emailexists");k[j.name]=
a.isFunction(n)?l(m):n;h.showErrors(k)}e.valid=g;h.stopRequest(j,g)}});return"pending"}else if(this.pending[j.name])return"pending";return e.valid},undefined);a.validator.addMethod("groupnameexists",function(m,j,c){if(this.optional(j))return"dependency-mismatch";var e=encodeURIComponent(a.trim(m));if(e.length==0)return true;var f=this.previousValue(j);this.settings.messages[j.name]||(this.settings.messages[j.name]={});f.originalMessage=this.settings.messages[j.name].remote;this.settings.messages[j.name].remote=
f.message;c=c.getParentId();e='{"groupName":"'+e+'","parentGroupId":'+c+',"elementName":"'+j.name+'"}';if(f.old!==e){f.old=e;var h=this;this.startRequest(j);c=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsGroupNameAvailable";a.telligent.evolution.post({url:c,dataType:"json",contentType:"application/json; charset=utf-8",data:e,success:function(l){j=h.findByName(l.d.ElementName)[0];h.settings.messages[j.name].remote=f.originalMessage;var n=l.d.IsValid===true;if(n){var g=
h.formSubmitted;h.prepareElement(j);h.formSubmitted=g;h.successList.push(j);h.showErrors()}else{g={};l=f.message=l.d.ErrorMessage||h.defaultMessage(j,"groupnameexists");g[j.name]=a.isFunction(l)?message(m):l;h.showErrors(g)}f.valid=n;h.stopRequest(j,n)}});return"pending"}else if(this.pending[j.name])return"pending";return f.valid},undefined);a.validator.addMethod("wikipageexists",function(m,j,c){if(this.optional(j))return"dependency-mismatch";var e=encodeURIComponent(a.trim(m));if(e.length==0)return true;
var f=this.previousValue(j);this.settings.messages[j.name]||(this.settings.messages[j.name]={});f.originalMessage=this.settings.messages[j.name].remote;this.settings.messages[j.name].remote=f.message;c='{"pageName":"'+e+'","wikiId":'+c.wikiId+',"pageId":'+c.pageId+',"parentPageId":'+c.parentPageId()+',"elementName":"'+j.name+'"}';if(f.old!==c){f.old=c;var h=this;this.startRequest(j);e=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsWikiPageNameAvailable";a.telligent.evolution.post({url:e,
dataType:"json",contentType:"application/json; charset=utf-8",data:c,success:function(l){j=h.findByName(l.d.ElementName)[0];h.settings.messages[j.name].remote=f.originalMessage;var n=l.d.IsValid===true;if(n){var g=h.formSubmitted;h.prepareElement(j);h.formSubmitted=g;h.successList.push(j);h.showErrors()}else{g={};l=f.message=l.d.ErrorMessage||h.defaultMessage(j,"wikipageexists");g[j.name]=a.isFunction(l)?message(m):l;h.showErrors(g)}f.valid=n;h.stopRequest(j,n)}});return"pending"}else if(this.pending[j.name])return"pending";
return f.valid},undefined);a.validator.addMethod("mailinglistnameexists",function(m,j,c){if(a.trim(m)=="")return this.optional(j);var e=this.previousValue(j);this.settings.messages[j.name]||(this.settings.messages[j.name]={});e.originalMessage=this.settings.messages[j.name].remote;this.settings.messages[j.name].remote=e.message;c=typeof c=="string"&&{url:c}||c;var f=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsMailingListNameAvailable";if(c.url)f=c.url;if(e.old!==
m){e.old=m;var h=this;this.startRequest(j);var l='{"mailingListName":"'+m+'","elementName":"'+j.name+'"}';a.telligent.evolution.post({url:f,dataType:"json",contentType:"application/json; charset=utf-8",data:l,success:function(n){j=h.findByName(n.d.ElementName)[0];h.settings.messages[j.name].remote=e.originalMessage;var g=n.d.IsValid===true;if(g){var k=h.formSubmitted;h.prepareElement(j);h.formSubmitted=k;h.successList.push(j);h.showErrors()}else{k={};n=e.message=n.d.ErrorMessage||h.defaultMessage(j,
"mailinglistnameexists");k[j.name]=a.isFunction(n)?l(m):n;h.showErrors(k)}e.valid=g;h.stopRequest(j,g)}});return"pending"}else if(this.pending[j.name])return"pending";return e.valid},undefined)}}}})(jQuery,window);
(function(a){var s={addField:function(g,k,d,b){var r=this.data("evolutionValidation");if(typeof r!=="undefined"){r.internal.fields[r.internal.fields.length]={selector:g,messageSelector:d,isValid:true,context:b,initialized:false};g=a(g);g.data("_evolutionValidation",r).data("_evolutionValidationFieldIndex",r.internal.fields.length-1).data("_evolutionValidationOldValue","$$$$$NULL$$$$$").rules("add",k);try{g.keydown(function(){if(r.internal.hasAttemptedSubmit){window.clearTimeout(r.internal.keyPressValidationHandle);
var o=this;r.internal.keyPressValidationHandle=window.setTimeout(function(){e(r,a(o))},499)}})}catch(q){}g.blur(function(){e(r,a(this))})}return this},addCustomValidation:function(g,k,d,b,r){var q=this.data("evolutionValidation");if(typeof q!=="undefined"){var o=q.internal.customValidations.length;q.internal.customValidations[o]={id:g,validationFunction:k,message:d,messageSelector:b,isValid:true,context:r,initialized:false};return function(){return h(q,o)}}},isValid:function(){for(var g=this.data("evolutionValidation"),
k=0;k<g.internal.fields.length;k++)g.internal.fields[k].initialized||e(g,a(g.internal.fields[k].selector));for(k=0;k<g.internal.customValidations.length;k++)g.internal.customValidations[k].initialized||h(g,k);return c(g)},validate:function(){for(var g=this.data("evolutionValidation"),k=0;k<g.internal.fields.length;k++)e(g,a(g.internal.fields[k].selector));for(k=0;k<g.internal.customValidations.length;k++)h(g,k);return s.isValid.apply(a(g.internal.state),[])},validateField:function(g){try{var k=this.data("evolutionValidation");
return e(k,a(g))}catch(d){}},validateCustom:function(g){for(var k=this.data("evolutionValidation"),d=0;d<k.internal.customValidations.length;d++)if(k.internal.customValidations[d].id==g)return h(k,d);return true},reset:function(){for(var g=this.data("evolutionValidation"),k=0;k<g.internal.customValidations.length;k++){a(g.internal.customValidations[k].messageSelector).hide();g.internal.customValidations[k].isValid=true;g.internal.customValidations[k].initialized=false}for(k=0;k<g.internal.fields.length;k++){a(g.internal.fields[k].messageSelector).hide();
g.internal.fields[k].errorMessage=null;g.internal.fields[k].isValid=true;g.internal.fields[k].initialized=false;a(g.internal.fields[k].selector).data("_evolutionValidationOldValue","$$$$$NULL$$$$$")}g.internal.submitButtonClicked=false;g.internal.hasAttemptedSubmit=false;window.clearTimeout(g.internal.initialValidationHandle);g.internal.initialValidationHandle=window.setTimeout(function(){j(g)},249)}},m=function(g){return this.each(function(){var k={settings:a.extend({},a.fn.evolutionValidation.defaults,
g||{}),internal:{state:this,submitButtonClicked:false,hasAttemptedSubmit:false,fields:[],customValidations:[],initialValidationHandle:null}};a(this).data("evolutionValidation",k);a(this).click(function(d){return l(k,d)});this._isValid=function(){return l(k,{})};window.clearTimeout(k.internal.initialValidationHandle);k.internal.initialValidationHandle=window.setTimeout(function(){j(k)},499)})},j=function(g){window.clearTimeout(g.internal.initialValidationHandle);try{var k=false;if(g.settings.validateOnLoad===
true)k=true;else if(g.settings.validateOnLoad!==false)for(var d=0;d<g.internal.fields.length;d++){var b=a(g.internal.fields[d].selector),r=b.attr("type");if(r!="checkbox"&&r!="radio"&&r!="select"&&r!="submit"&&r!="button"&&r!="reset"&&f(g,b)!=""){k=true;break}}if(k){g.internal.hasAttemptedSubmit=true;var q=s.validate.apply(a(g.internal.state));n(g);g.settings.onValidated&&g.settings.onValidated(q,false,null)}else g.internal.hasAttemptedSubmit||g.settings.onValidated&&g.settings.onValidated(true,false,
null)}catch(o){g.internal.initialValidationHandle=window.setTimeout(function(){j(g)},499)}},c=function(g){for(var k=0;k<g.internal.fields.length;k++)if(!g.internal.fields[k].isValid)return false;for(k=0;k<g.internal.customValidations.length;k++)if(!g.internal.customValidations[k].isValid)return false;return true},e=function(g,k){var d=f(g,k);if(d!=k.data("_evolutionValidationOldValue")){k.data("_evolutionValidationOldValue",d);return k.valid()}else{d=k.data("_evolutionValidationFieldIndex");if(d<
0||d>=g.internal.fields.length)return false;return g.internal.fields[d].isValid}},f=function(g,k){return k.attr("type")=="checkbox"||k.attr("type")=="radio"?k.get(0).checked?k.val():"":k.val()},h=function(g,k){if(k<0||k>=g.internal.customValidations.length)return true;var d=g.internal.customValidations[k].validationFunction();g.internal.customValidations[k].initialized=true;if(d===true){g.internal.customValidations[k].isValid=true;a(g.internal.customValidations[k].messageSelector).hide();c(g)&&g.internal.hasAttemptedSubmit&&
g.settings.onValidated&&g.settings.onValidated(true,g.internal.submitButtonClicked,g.internal.customValidations[k].context);return true}else{d=c(g);g.internal.customValidations[k].isValid=false;g.internal.hasAttemptedSubmit&&a(g.internal.customValidations[k].messageSelector).html(g.internal.customValidations[k].message).show();if((g.internal.submitButtonClicked||d)&&g.internal.hasAttemptedSubmit&&g.settings.onValidated)g.settings.onValidated(false,g.internal.submitButtonClicked,g.internal.customValidations[k].context);
return false}},l=function(g,k){var d=!g.internal.hasAttemptedSubmit;g.internal.hasAttemptedSubmit=true;g.internal.submitButtonClicked=true;s.validate.apply(a(g.internal.state),[]);var b=s.isValid.apply(a(g.internal.state),[]);d&&!b&&n(g);d=true;if(b&&g.settings.onSuccessfulClick)d=g.settings.onSuccessfulClick(k);g.internal.submitButtonClicked=false;if(!b&&k){k.cancelBubble=true;k.returnValue=false}return b&&d!==false},n=function(g){for(var k=0;k<g.internal.fields.length;k++)if(!g.internal.fields[k].isValid&&
g.internal.fields[k].errorMessage!=null){a(g.internal.fields[k].messageSelector).html(g.internal.fields[k].errorMessage).show();g.internal.fields[k].errorMessage=null}for(k=0;k<g.internal.customValidations.length;k++)g.internal.customValidations[k].isValid||a(g.internal.customValidations[k].messageSelector).html(g.internal.customValidations[k].message).show()};a.fn.evolutionValidation=function(g){if(g in s)return s[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||
!g)return m.apply(this,arguments);else a.error("Method "+g+" does not exist on jQuery.fn.evolutionValidation")};a.extend(a.fn.evolutionValidation,{defaults:{validateOnLoad:null,onValidated:null,onSuccessfulClick:null}});a(document).ready(function(){a("form").validate({errorPlacement:function(g,k){var d=a(k).data("_evolutionValidation");if(d){var b=parseInt(a(k).data("_evolutionValidationFieldIndex"),10);if(!(b<0||b>=d.internal.fields.length))if(d.internal.hasAttemptedSubmit)a(d.internal.fields[b].messageSelector).html(g).show();
else d.internal.fields[b].errorMessage=g}},highlight:function(g){var k=a(g).data("_evolutionValidation");if(k){var d=c(k);g=a(g).data("_evolutionValidationFieldIndex");if(!(g<0||g>=k.internal.fields.length)){k.internal.fields[g].isValid=false;k.internal.fields[g].initialized=true;if((k.internal.submitButtonClicked||d)&&k.internal.hasAttemptedSubmit&&k.settings.onValidated)k.settings.onValidated(false,k.internal.submitButtonClicked,k.internal.fields[g].context)}}},unhighlight:function(g){var k=a(g).data("_evolutionValidation");
if(k){g=a(g).data("_evolutionValidationFieldIndex");if(!(g<0||g>=k.internal.fields.length)){k.internal.fields[g].isValid=true;k.internal.fields[g].initialized=true;c(k)&&k.internal.hasAttemptedSubmit&&k.settings.onValidated&&k.settings.onValidated(true,k.internal.submitButtonClicked,k.internal.fields[g].context)}}},onsubmit:false,onkeyup:false,onfocusout:false})})})(jQuery);
function Telligent_Validation(a,s){this._jq=$(a);if(s.onValidatedFunction)s.onValidated=s.onValidatedFunction;if(s.onSuccessfulClickFunction)s.onSuccessfulClick=s.onSuccessfulClickFunction;this._jq.evolutionValidation(s)}Telligent_Validation.prototype.AddField=function(a,s,m,j){this._jq.evolutionValidation("addField",a,s,m,j)};Telligent_Validation.prototype.AddCustomValidation=function(a,s,m,j,c){return this._jq.evolutionValidation("addCustomValidation",a,s,m,j,c)};
Telligent_Validation.prototype.IsValid=function(){return this._jq.evolutionValidation("isValid")};Telligent_Validation.prototype.Validate=function(){return this._jq.evolutionValidation("validate")};Telligent_Validation.prototype.ValidateField=function(a){return this._jq.evolutionValidation("validateField",a)};Telligent_Validation.prototype.ValidateCustom=function(a){return this._jq.evolutionValidation("validateCustom",a)};
